(this["webpackJsonpreact-expenses"]=this["webpackJsonpreact-expenses"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(25),o=n.n(r),s=(n(36),n(37),n(10)),i=n(4),l=n(13),d=n(6),u=n.n(d),j=n(16),h=n.n(j),b=n(26),p=n.n(b),O=n(20),f=n(12),m=n.n(f),v="https://dev-expenses-api.pantheonsite.io";function g(e,t){return x.apply(this,arguments)}function x(){return(x=Object(O.a)(m.a.mark((function e(t,n){var a,c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.prev=1,t({type:"REQUEST_LOGIN"}),e.next=5,fetch("".concat(v,"/user/login/google?_format=json"),a);case 5:return c=e.sent,e.next=8,c.json();case 8:if(!(r=e.sent).current_user){e.next=13;break}return t({type:"LOGIN_SUCCESS",payload:r}),localStorage.setItem("currentUser",JSON.stringify(r)),e.abrupt("return",r);case 13:t({type:"LOGIN_ERROR",error:r.errors[0]}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t({type:"LOGIN_ERROR",error:e.t0});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function y(){return(y=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),n({type:"REMOVE_DATA"}),localStorage.removeItem("currentUser"),localStorage.removeItem("token");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(2),S=n(3),D=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):"",T={userDetails:D,token:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).jwt_token:"",loading:!1,errorMessage:null,userIsLoggedIn:!!D},_={groupedData:null,totals:null,filtered:null,raw:[],incomeData:null,incomeTotals:null,categoryTotals:[],loading:!0},k=function(e,t){switch(t.type){case"REQUEST_LOGIN":return Object(S.a)(Object(S.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{userDetails:t.payload,token:t.payload.jwt_token,loading:!1,userIsLoggedIn:!0});case"LOGOUT":return Object(S.a)(Object(S.a)({},e),{},{user:"",token:"",userIsLoggedIn:!1});case"LOGIN_ERROR":return Object(S.a)(Object(S.a)({},e),{},{loading:!1,errorMessage:t.error});default:throw new Error("Unhandled action type: ".concat(t.type))}},N=function(e,t){switch(t.type){case"SET_DATA":return Object(S.a)(Object(S.a)({},e),{},{groupedData:t.groupedData,totals:t.totals,raw:t.raw,incomeData:t.incomeData,incomeTotals:t.incomeTotals,categoryTotals:t.categoryTotals,loading:t.loading,totalSpent:t.totalSpent,totalSpentUntilTomorrow:t.totalSpentUntilTomorrow});case"FILTER_DATA":if(""!==t.category&&e.raw){var n=e.raw.filter((function(e){return e.cat===t.category})),a={},c={},r=["January","February","March","April","May","June","July","August","September","October","November","December"];n.forEach((function(e){var t=new Date(e.dt),n="".concat(r[t.getMonth()]," ").concat(t.getFullYear());a[n]||(a[n]=[]),c[n]||(c[n]=0),a[n].push(e),c[n]+=parseInt(e.sum)}));var o={groupedData:a,totals:c};return Object(S.a)(Object(S.a)({},e),{},{filtered:o,category:t.category})}return Object(S.a)(Object(S.a)({},e),{},{filtered:null,category:""});case"REMOVE_DATA":return _;default:throw new Error("Unhandled action type: ".concat(t.type))}},C=n(0),A=c.a.createContext(),I=c.a.createContext(),E=c.a.createContext();function P(){var e=c.a.useContext(A);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}function L(){var e=c.a.useContext(E);if(void 0===e)throw new Error("useData must be used within a AuthProvider");return e}function M(){var e=c.a.useContext(I);if(void 0===e)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}var U=function(e){var t=e.children,n=Object(a.useReducer)(k,T),c=Object(w.a)(n,2),r=c[0],o=c[1],s=Object(a.useReducer)(N,_),i=Object(w.a)(s,2),l=i[0],d=i[1];return Object(C.jsx)(A.Provider,{value:r,children:Object(C.jsx)(I.Provider,{value:o,children:Object(C.jsx)(E.Provider,{value:{data:l,dataDispatch:d},children:t})})})},J=[{value:"",label:"Category"},{value:"1",label:"Clothing"},{value:"2",label:"Entertainment"},{value:"3",label:"Food"},{value:"4",label:"Gifts"},{value:"5",label:"Household Items/Supplies"},{value:"6",label:"Housing"},{value:"7",label:"Medical/Healthcare"},{value:"8",label:"Personal"},{value:"9",label:"Transportation"},{value:"10",label:"Utilities"}],F=function(e){return e.ok?e.json():e.statusText},R=function(e,t,n){fetch(e,t).then(F).then((function(e){return n(e)})).catch((function(e){return console.log(e)}))},W=function(e,t,n){var a={method:"DELETE",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":"Bearer "+t})};fetch("https://dev-expenses-api.pantheonsite.io/node/".concat(e,"?_format=json"),a).then((function(e){n(e)}))},G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":"Bearer "+e})};R("https://dev-expenses-api.pantheonsite.io/user-expenses?_format=json",a,(function(e){var a={},c=[],r={},o={},s={},i=0,l=0,d=(new Date).setHours(24,0,0,0);if(e){var u=["January","February","March","April","May","June","July","August","September","October","November","December"];e.forEach((function(e){var t=new Date(e.dt),n=e.cat,j="".concat(u[t.getMonth()]," ").concat(t.getFullYear());a[j]||(a[j]=[]),r[j]||(r[j]=0),o[j]||(o[j]=0),!s[n]&&n&&(s[n]={name:"",y:0}),"incomes"===e.type?(c.push(e),o[j]+=parseInt(e.sum)):(a[j].push(e),r[j]+=parseInt(e.sum),s[n].name=J[n].label,s[n].y+=parseInt(e.sum),t<d&&(l+=parseInt(e.sum)),i+=parseInt(e.sum))}))}t({type:"SET_DATA",raw:e,groupedData:a,totals:r,incomeData:c,incomeTotals:o,categoryTotals:s,loading:!1,totalSpent:i,totalSpentUntilTomorrow:l}),n&&t({type:"FILTER_DATA",category:n})}))};function H(){var e=L(),t=e.data,n=e.dataDispatch;return Object(C.jsx)("div",{className:"filters",children:Object(C.jsx)("select",{value:t.category,name:"category",onChange:function(e){var t=e.target.value;n({type:"FILTER_DATA",category:t})},children:J.map((function(e,t){return Object(C.jsx)("option",{value:e.value,children:e.label},t)}))})})}p()(u.a),u.a.theme={chart:{backgroundColor:"#282a36"},tooltip:{style:{fontSize:"15px"}}},u.a.setOptions(u.a.theme),u.a.setOptions({colors:u.a.map(u.a.getOptions().colors,(function(e){return{radialGradient:{cx:.5,cy:.3,r:.7},stops:[[0,e],[1,u.a.color(e).brighten(-.25).get("rgb")]]}}))});var B=function(){var e,t=L(),n=t.data,c=t.dataDispatch,r=null===n.groupedData,o=P().token,s=n.loading;Object(a.useEffect)((function(){r&&G(o,c)}),[n,c,r,o]);var i,d=n.filtered||n,j={chart:{type:"column"},title:{text:"Monthly Totals"},xAxis:{categories:d.totals?Object.keys(d.totals).reverse():[]},yAxis:{min:0,title:{text:"MDL"},stackLabels:{style:{color:"#FFFFFF",fontWeight:"bold"},enabled:!0,verticalAlign:"top"}},plotOptions:{column:{pointPadding:.2,borderWidth:0,stacking:"normal",groupPadding:0},series:{colorByPoint:!0}},credits:{enabled:!1},series:[{name:n.category?J.find((function(e){return e.value===n.category})).label:"Monthly totals",data:d.totals?Object.values(d.totals).reverse():[]}]},b=(new Date).setDate((new Date).getDate()-30),p=(new Date).setDate((new Date).getDate()-60),O=(new Date).setHours(24,0,0,0),f={},m=0,v={},g=!1,x=Object(l.a)(n.raw);try{var y=function(){var e=i.value;if("incomes"===e.type)return"continue";var t=new Date(e.dt);if(t<p)return g=!0,"break";if(v=e,t<O&&(m+=parseInt(e.sum),t>b)){var n=J.find((function(t){return t.value===e.cat})).label;f[n]||(f[n]={name:n,y:0}),f[n].y+=parseInt(e.sum)}};for(x.s();!(i=x.n()).done;){var w=y();if("continue"!==w&&"break"===w)break}}catch(I){x.e(I)}finally{x.f()}var S=(new Date).getTime()-new Date(v.dt).getTime(),D=g?60:S/864e5,T={chart:{type:"pie"},title:{text:"Last 30 days spendings"},plotOptions:{pie:{borderWidth:0}},series:[{name:"MDL",colorByPoint:!0,data:Object.values(f)}],credits:{enabled:!1}},_=n.groupedData?Object.keys(n.groupedData).length:0,k={chart:{type:"pie"},title:{text:"All time spendings"},plotOptions:{pie:{borderWidth:0}},series:[{name:"MDL",colorByPoint:!0,data:Object.values(n.categoryTotals)}],credits:{enabled:!1}},N=null===(e=n.raw[n.raw.length-1])||void 0===e?void 0:e.dt,A=parseInt(((new Date).getTime()-new Date(N).getTime())/864e5+1);return Object(C.jsxs)("div",{children:[Object(C.jsx)("h2",{children:"Charts page"}),Object(C.jsx)(H,{}),s?Object(C.jsxs)("div",{className:"lds-ripple",children:[Object(C.jsx)("div",{}),Object(C.jsx)("div",{})]}):!r&&Object(C.jsxs)("div",{className:"charts-page",children:[Object(C.jsx)("div",{className:"charts-section",children:Object(C.jsx)(h.a,{highcharts:u.a,options:j})}),Object(C.jsx)("div",{className:"charts-section",children:Object(C.jsx)(h.a,{highcharts:u.a,options:T})}),Object(C.jsxs)("div",{className:"charts-section",children:[Object(C.jsx)(h.a,{highcharts:u.a,options:k}),Object(C.jsxs)("div",{className:"average-spending",children:["Total spent: ",n.totalSpent," mdl in ",_," months"]})]}),Object(C.jsxs)("div",{className:"charts-section",children:[Object(C.jsx)("span",{className:"heading",children:"Daily average per category"}),Object(C.jsx)("table",{className:"daily-average",children:Object(C.jsx)("tbody",{children:Object.values(n.categoryTotals).map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.name}),Object(C.jsxs)("td",{children:["~",parseInt(e.y/A)," mdl / day"]})]},t)}))})}),Object(C.jsxs)("div",{className:"average-spending",children:["Average spending per day: ~",parseInt(n.totalSpentUntilTomorrow/A)," mdl"]})]}),m&&Object(C.jsx)("div",{className:"charts-section",children:Object(C.jsxs)("span",{children:["Average spending for the last 60 days: ",parseInt(m/Math.ceil(D))," mdl / day"]})})]})]})};function q(e){var t=e.show,n=e.onClose,c=e.children,r=Object(a.useRef)();return Object(a.useEffect)((function(){var e=function(e){t&&r.current&&!r.current.contains(e.target)&&n(e)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,n]),Object(C.jsx)(C.Fragment,{children:t?Object(C.jsx)("div",{className:"modal-window",children:Object(C.jsxs)("div",{ref:r,children:[Object(C.jsx)("a",{href:"/",onClick:n,title:"Close",className:"modal-close",children:"Close"}),c]})}):""})}var Y,z=n(15),Q=function(e){var t=e.formType,n=e.values,c=e.onSuccess,r={field_amount:"",field_date:(new Date).toISOString().substr(0,10),field_category:"",field_description:""},o=Object(a.useState)("add"===t?r:n),s=Object(w.a)(o,2),i=s[0],l=s[1],d=P().token,u=function(e){var t=e.target.value;l(Object(S.a)(Object(S.a)({},i),{},Object(z.a)({},e.target.name,t)))};return Object(C.jsxs)("div",{children:[Object(C.jsx)("h2",{children:"add"===t?"Add transaction":"Edit transaction"}),Object(C.jsxs)("form",{className:"add-transaction",onSubmit:function(e){e.preventDefault();var a={type:"transaction",title:[i.field_date],field_amount:[i.field_amount],field_category:[i.field_category],field_date:[i.field_date],field_description:[i.field_description]},o={method:"add"===t?"POST":"PATCH",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":"Bearer "+d}),body:JSON.stringify(a)},s="add"===t?"https://dev-expenses-api.pantheonsite.io/node?_format=json":"https://dev-expenses-api.pantheonsite.io/node/".concat(n.nid,"?_format=json");R(s,o,(function(e){e.nid?(c(),alert("Success!"),l(r)):alert("Something went wrong, please contact Constantin :)")}))},children:[Object(C.jsx)("input",{required:!0,placeholder:"Amount",type:"number",name:"field_amount",value:i.field_amount,onChange:u}),Object(C.jsx)("input",{required:!0,placeholder:"Date",type:"date",name:"field_date",value:i.field_date,onChange:u}),Object(C.jsx)("select",{required:!0,name:"field_category",value:i.field_category,onChange:u,children:J.map((function(e,t){return Object(C.jsx)("option",{value:e.value,children:e.label},t)}))}),Object(C.jsx)("textarea",{placeholder:"Description",name:"field_description",rows:"3",value:i.field_description,onChange:u}),Object(C.jsx)("input",{type:"submit",value:"add"===t?"Add transaction":"Edit transaction"})]})]})},V=n(31),X={},$=Object(l.a)(J);try{for($.s();!(Y=$.n()).done;){var K=Y.value;X[K.value]=K.label}}catch(fe){$.e(fe)}finally{$.f()}function Z(e){var t,n=e.month,c=e.total,r=e.items,o=e.handleEdit,s=e.setShowDeleteModal,i=e.incomeTotals,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useState)(t),c=Object(w.a)(n,2),r=c[0],o=c[1];return{sortedItems:Object(a.useMemo)((function(){var t=Object(V.a)(e);return null!==r&&t.sort((function(e,t){return"ascending"===r.direction?e[r.key]-t[r.key]:t[r.key]-e[r.key]})),t}),[e,r]),requestSort:function(e){var t="ascending";r&&r.key===e&&"ascending"===r.direction&&(t="descending"),o({key:e,direction:t})},sortConfig:r}}(r),d=l.sortedItems,u=l.requestSort,j=l.sortConfig,h=i?i[n]:-1,b=h-c,p=h>0?"".concat(n,": Income: ").concat(h," - Expenses: ").concat(c," = Profit: ").concat(b):"".concat(n,": Expenses: ").concat(c);return Object(C.jsxs)("div",{className:"table-wrapper",children:[Object(C.jsx)("div",{className:"month-badge",children:p}),Object(C.jsxs)("table",{className:"expenses-table",cellSpacing:"0",cellPadding:"0",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Date"}),Object(C.jsx)("th",{onClick:function(){return u("sum")},className:"sortable ".concat((t="sum",j&&j.key===t?j.direction:"")),children:"Amount"}),Object(C.jsx)("th",{children:"Category"}),Object(C.jsx)("th",{children:"Description"}),Object(C.jsx)("th",{}),Object(C.jsx)("th",{})]})}),Object(C.jsx)("tbody",{children:d.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.dt}),Object(C.jsx)("td",{children:e.sum}),Object(C.jsx)("td",{children:X[e.cat]}),Object(C.jsx)("td",{children:e.dsc}),Object(C.jsx)("td",{children:Object(C.jsx)("button",{"data-values":JSON.stringify({nid:e.id,field_date:e.dt,field_amount:e.sum,field_category:e.cat,field_description:e.dsc}),onClick:o,className:"btn-outline",children:"Edit"})}),Object(C.jsx)("td",{children:Object(C.jsx)("button",{"data-nid":e.id,onClick:function(e){return s(e.currentTarget.getAttribute("data-nid"))},className:"btn-outline",children:"Delete"})})]},e.id)}))})]})]})}var ee=function(){var e,t=P(),n=t.userDetails,c=t.token,r=Object(a.useState)(!1),o=Object(w.a)(r,2),s=o[0],i=o[1],l=Object(a.useState)(!1),d=Object(w.a)(l,2),u=d[0],j=d[1],h=L(),b=h.data,p=h.dataDispatch,O=null===b.groupedData,f=b.loading;Object(a.useEffect)((function(){O&&G(c,p)}),[b,p,c,O]);var m=Object(a.useState)({}),v=Object(w.a)(m,2),g=v[0],x=v[1],y=function(e){var t=JSON.parse(e.currentTarget.getAttribute("data-values"));x(t),j(!0)},S=b.filtered||b,D=Object(a.useState)(2),T=Object(w.a)(D,2),_=T[0],k=T[1];return Object(C.jsxs)("div",{children:[Object(C.jsxs)(q,{show:s,onClose:function(e){e.preventDefault(),i(!1)},children:[Object(C.jsx)("h3",{children:"Are you sure you want to delete the transaction?"}),Object(C.jsx)("button",{onClick:function(){return function(e,t){W(e,t,(function(e){e.ok?alert("Transaction was successfully deleted."):alert("Something went wrong."),i(!1),G(t,p,b.category)}))}(s,c)},className:"button logout",children:"Yes, remove the transaction"})]}),Object(C.jsx)(q,{show:u,onClose:function(e){e.preventDefault(),j(!1)},children:Object(C.jsx)(Q,{formType:"edit",values:g,onSuccess:function(){j(!1),G(c,p,b.category)}})}),Object(C.jsx)("h2",{children:"Expenses"}),Object(C.jsxs)("h4",{children:["Hi, ",null===n||void 0===n||null===(e=n.current_user)||void 0===e?void 0:e.name,"!"]}),Object(C.jsx)(H,{}),f?Object(C.jsxs)("div",{className:"lds-ripple",children:[Object(C.jsx)("div",{}),Object(C.jsx)("div",{})]}):O?"":Object(C.jsxs)("div",{children:[Object.keys(S.groupedData).map((function(e,t){return t<_?Object(C.jsx)(Z,{total:S.totals[e],month:e,incomeTotals:S.incomeTotals,items:S.groupedData[e],handleEdit:y,setShowDeleteModal:i},t):""})),Object.keys(S.groupedData).length>_?Object(C.jsx)("div",{className:"load-more",children:Object(C.jsx)("button",{onClick:function(){return k(_+1)},className:"btn-outline",children:"Load more"})}):""]})]})},te=n(27),ne=n.n(te),ae=function(){var e=M(),t=Object(i.g)(),n=P(),a=n.loading,c=n.errorMessage;n.userIsLoggedIn&&t.push("/expenses/home");var r=function(){var n=Object(O.a)(m.a.mark((function n(a){var c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={access_token:a.accessToken},n.prev=1,n.next=4,g(e,c);case 4:if(n.sent.current_user){n.next=7;break}return n.abrupt("return");case 7:t.push("/expenses/home"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)("h4",{children:"Please login using Google in order to access app functionality."}),c?Object(C.jsxs)("p",{children:["We have some errors: ",c]}):null,Object(C.jsx)(ne.a,{clientId:"954790461001-2p4vab8hud9u6mj4n6hb6iio4uaiofe5.apps.googleusercontent.com",buttonText:"Login",render:function(e){return Object(C.jsx)("button",{onClick:e.onClick,className:"button logout",disabled:a,children:"Log in"})},onSuccess:r,onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin",disabled:a})]})},ce=function(){var e=M(),t=L().dataDispatch,n=Object(i.g)();return Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:"Do you want to logout?"}),Object(C.jsx)("button",{className:"button logout",onClick:function(a){a.preventDefault(),function(e,t){y.apply(this,arguments)}(e,t),n.push("/expenses/login")},children:"Logout"})]})},re=function(e){var t=e.formType,n=e.values,c=e.onSuccess,r={field_amount:"",field_date:(new Date).toISOString().substr(0,10),field_description:""},o=Object(a.useState)("add"===t?r:n),s=Object(w.a)(o,2),i=s[0],l=s[1],d=P().token,u=function(e){var t=e.target.value;l(Object(S.a)(Object(S.a)({},i),{},Object(z.a)({},e.target.name,t)))};return Object(C.jsxs)("div",{children:[Object(C.jsx)("h2",{children:"add"===t?"Add income":"Edit income"}),Object(C.jsxs)("form",{className:"add-transaction",onSubmit:function(e){e.preventDefault();var a={type:"incomes",title:[i.field_date],field_amount:[i.field_amount],field_date:[i.field_date],field_description:[i.field_description]},o={method:"add"===t?"POST":"PATCH",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":"Bearer "+d}),body:JSON.stringify(a)},s="add"===t?"https://dev-expenses-api.pantheonsite.io/node?_format=json":"https://dev-expenses-api.pantheonsite.io/node/".concat(n.nid,"?_format=json");R(s,o,(function(e){e.nid?(c(),alert("Success!"),l(r)):alert("Something went wrong, please contact Sergiu S :)")}))},children:[Object(C.jsx)("input",{required:!0,placeholder:"Amount",type:"number",name:"field_amount",value:i.field_amount,onChange:u}),Object(C.jsx)("input",{required:!0,placeholder:"Date",type:"date",name:"field_date",value:i.field_date,onChange:u}),Object(C.jsx)("textarea",{placeholder:"Description",name:"field_description",rows:"3",value:i.field_description,onChange:u}),Object(C.jsx)("input",{type:"submit",value:"add"===t?"Add income":"Edit income"})]})]})};function oe(e){var t=e.items,n=e.handleEdit,a=e.setShowDeleteModal,c=t&&t.length?t.reduce((function(e,t){return parseInt(e)+(parseInt(t.sum)||0)}),0):0;return Object(C.jsxs)("div",{className:"table-wrapper",children:[Object(C.jsxs)("div",{className:"month-badge",children:["Incomes: ",c]}),Object(C.jsxs)("table",{className:"expenses-table",cellSpacing:"0",cellPadding:"0",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Date"}),Object(C.jsx)("th",{children:"Amount"}),Object(C.jsx)("th",{children:"Description"}),Object(C.jsx)("th",{}),Object(C.jsx)("th",{})]})}),Object(C.jsx)("tbody",{children:t.map((function(e){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.dt}),Object(C.jsx)("td",{children:e.sum}),Object(C.jsx)("td",{children:e.dsc}),Object(C.jsx)("td",{children:Object(C.jsx)("button",{"data-values":JSON.stringify({nid:e.id,field_date:e.dt,field_amount:e.sum,field_description:e.dsc}),onClick:n,className:"btn-outline",children:"Edit"})}),Object(C.jsx)("td",{children:Object(C.jsx)("button",{"data-nid":e.id,onClick:function(e){return a(e.currentTarget.getAttribute("data-nid"))},className:"btn-outline",children:"Delete"})})]},e.id)}))})]})]})}var se=[{path:"/expenses/login",component:ae,isPrivate:!1},{path:"/expenses/charts",component:B,isPrivate:!0},{path:"/expenses/home",component:ee,isPrivate:!0},{path:"/expenses/user",component:ce,isPrivate:!0},{path:"/expenses/add-transaction",component:function(){var e=P().token,t=L().dataDispatch;return Object(C.jsx)(Q,{formType:"add",onSuccess:function(){G(e,t)}})},isPrivate:!0},{path:"/expenses/income",component:function(){var e,t=P().token,n=Object(a.useState)(!1),c=Object(w.a)(n,2),r=c[0],o=c[1],s=Object(a.useState)(!1),i=Object(w.a)(s,2),l=i[0],d=i[1],u=Object(a.useState)(!1),j=Object(w.a)(u,2),h=j[0],b=j[1],p=L(),O=p.data,f=p.dataDispatch,m=null===O.groupedData;Object(a.useEffect)((function(){m&&G(t,f)}),[O,f,m,t]);var v=Object(a.useState)({}),g=Object(w.a)(v,2),x=g[0],y=g[1];return Object(C.jsxs)("div",{children:[Object(C.jsxs)(q,{show:r,onClose:function(e){e.preventDefault(),o(!1)},children:[Object(C.jsx)("h3",{children:"Are you sure you want to delete the income?"}),Object(C.jsx)("button",{onClick:function(){return function(e,t){W(e,t,(function(e){e.ok?alert("Income was successfully deleted."):alert("Something went wrong."),o(!1),G(t,f)}))}(r,t)},className:"button logout",children:"Yes, remove the income"})]}),Object(C.jsx)(q,{show:l,onClose:function(e){e.preventDefault(),d(!1),b(!1)},children:Object(C.jsx)(re,{formType:h?"add":"edit",values:x,onSuccess:function(){d(!1),G(t,f)}})}),Object(C.jsx)("h2",{children:"Incomes"}),m?"":Object(C.jsxs)("div",{children:[Object(C.jsx)("button",{onClick:function(){d(!0),b(!0)},className:"button logout",children:"Add new income"}),O.incomeData&&O.incomeData.length?Object(C.jsx)(oe,{items:null!==(e=O.incomeData)&&void 0!==e?e:[],handleEdit:function(e){var t=JSON.parse(e.currentTarget.getAttribute("data-values"));y(t),d(!0)},setShowDeleteModal:o},"income"):""]})]})},isPrivate:!0}],ie=n(17);function le(){var e=P().userIsLoggedIn,t=Object(a.useState)("closed"),n=Object(w.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(null),i=Object(w.a)(o,2),l=i[0],d=i[1],u=Object(a.useState)(null),j=Object(w.a)(u,2),h=j[0],b=j[1];return Object(C.jsx)("div",{className:"navbar ".concat(c),onTouchStart:function(e){return function(e){var t=e.touches[0];d(t.clientX),b(t.clientY)}(e)},onTouchMove:function(e){return function(e){if(l&&h){var t=e.touches[0].clientX,n=e.touches[0].clientY,a=l-t,c=h-n;Math.abs(a)<Math.abs(c)&&r(c>0?"open":"closed"),d(null),b(null)}}(e)},children:Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(s.b,{activeClassName:"selected",className:"not-selected",to:"/expenses/home",exact:!0,children:Object(C.jsx)(ie.b,{})})}),Object(C.jsx)("li",{children:Object(C.jsx)(s.b,{to:"/expenses/charts",activeClassName:"selected",className:"not-selected",exact:!0,children:Object(C.jsx)(ie.a,{})})}),Object(C.jsx)("li",{children:Object(C.jsx)(s.b,{to:"/expenses/add-transaction",activeClassName:"selected",className:"not-selected",exact:!0,children:Object(C.jsx)(ie.d,{})})}),Object(C.jsx)("li",{children:Object(C.jsx)(s.b,{to:"/expenses/income",activeClassName:"selected",className:"not-selected",exact:!0,children:Object(C.jsx)(ie.c,{})})}),e?Object(C.jsx)("li",{children:Object(C.jsx)(s.b,{to:"/expenses/user",activeClassName:"selected",className:"not-selected",exact:!0,children:Object(C.jsx)(ie.e,{})})}):""]})})}var de=n(30),ue=["component","path","isPrivate"],je=function(e){var t=e.component,n=e.path,a=e.isPrivate,c=Object(de.a)(e,ue),r=P();return Object(C.jsx)(i.b,Object(S.a)({path:n,render:function(e){return a&&!Boolean(r.token)?Object(C.jsx)(i.a,{to:{pathname:"/expenses/login"}}):Object(C.jsx)(t,Object(S.a)({},e))}},c))};var he=function(){return Object(C.jsx)(U,{children:Object(C.jsxs)(s.a,{children:[Object(C.jsx)(le,{}),Object(C.jsx)(i.d,{children:se.map((function(e){return Object(C.jsx)(je,{exact:!0,path:e.path,component:e.component,isPrivate:e.isPrivate},e.path)}))})]})})},be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(he,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/expenses/home",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/expenses/home","/service-worker.js");be?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):pe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):pe(t,e)}))}}({onUpdate:function(e){window.location.reload()}}),Oe()}},[[45,1,2]]]);