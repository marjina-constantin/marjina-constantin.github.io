function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AllTimeSpendings-D15hDN9-.js","assets/react-vendor-DObCo5uo.js","assets/charts-vendor-BgOMIWtF.js","assets/icons-vendor-CjON0rrL.js","assets/MonthlyAverage-CykAOrI2.js","assets/useSortableData-BQ-KTF28.js","assets/SavingsHistory-ctnm5fjI.js","assets/DailyAverage-Cs0xuoqT.js","assets/DailyAverageTrend-C5GDBvYQ.js","assets/MonthlyAverageTrend-_LSrPi6_.js","assets/LastTwoMonthsAverage-DY_LVoSk.js","assets/WealthVelocity-BQae951R.js","assets/IncomeSources-CqCaqyIf.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as b,R as ie,N as Js,g as Xt,u as hs,a as ct,B as Qs,b as en,d as tn,e as sn}from"./react-vendor-DObCo5uo.js";import{H as Wt,a as Re}from"./charts-vendor-BgOMIWtF.js";import{S as Bt,X as fs,T as ps,W as ms,R as gs,C as xs,a as Ut,b as nn,c as bs,d as qt,e as rn,f as wt,g as St,A as ys,h as vs,i as ws,j as on,k as an,G as ln,L as cn,l as dn,m as un,U as hn}from"./icons-vendor-CjON0rrL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Ss={exports:{}},Ct={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fn=b,pn=Symbol.for("react.element"),mn=Symbol.for("react.fragment"),gn=Object.prototype.hasOwnProperty,xn=fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bn={key:!0,ref:!0,__self:!0,__source:!0};function As(e,t,s){var o,r={},i=null,a=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(o in t)gn.call(t,o)&&!bn.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:pn,type:e,key:i,ref:a,props:r,_owner:xn.current}}Ct.Fragment=mn;Ct.jsx=As;Ct.jsxs=As;Ss.exports=Ct;var n=Ss.exports;let se=null;function is(e){se=e}function Ts(){var e;(e=se==null?void 0:se.onSyncStart)==null||e.call(se)}function Es(e){var t;(t=se==null?void 0:se.onSyncFinish)==null||t.call(se,e)}function bt(e){var t;(t=se==null?void 0:se.onItemSynced)==null||t.call(se,e)}function _t(){var e;(e=se==null?void 0:se.onQueueUpdated)==null||e.call(se)}const yn=e=>[...e].sort((t,s)=>{const o=new Date(s.dt).getTime()-new Date(t.dt).getTime();return o!==0?o:(s.cr||0)-(t.cr||0)}),vn="expenses-db",wn=2,ue="expenses",Te="offlineQueue",it="syncMetadata";function be(){return new Promise((e,t)=>{const s=indexedDB.open(vn,wn);s.onerror=()=>t(s.error),s.onsuccess=()=>e(s.result),s.onupgradeneeded=o=>{const r=o.target.result;if(r.objectStoreNames.contains(ue)||r.createObjectStore(ue,{keyPath:"id"}).createIndex("updated","cr",{unique:!1}),!r.objectStoreNames.contains(Te)){const i=r.createObjectStore(Te,{keyPath:"id"});i.createIndex("timestamp","timestamp",{unique:!1}),i.createIndex("itemId","itemId",{unique:!1})}r.objectStoreNames.contains(it)||r.createObjectStore(it,{keyPath:"key"})}})}async function Kt(e){try{const t=await be(),s=t.transaction(ue,"readwrite"),o=s.objectStore(ue);await new Promise((i,a)=>{const c=o.clear();c.onsuccess=()=>i(),c.onerror=()=>a(c.error)});const r=e.map(i=>new Promise((a,c)=>{const l=o.put(i);l.onsuccess=()=>a(),l.onerror=()=>c(l.error)}));await Promise.all(r),s.oncomplete=()=>t.close()}catch(t){console.error("Error saving to IndexedDB:",t)}}async function rt(){try{const e=await be(),t=e.transaction(ue,"readonly"),s=t.objectStore(ue);return new Promise((o,r)=>{const i=s.getAll();i.onsuccess=()=>{const a=i.result;t.oncomplete=()=>e.close();const c=a.length>0?yn(a):null;o(c)},i.onerror=()=>{t.oncomplete=()=>e.close(),r(i.error)}})}catch(e){return console.error("Error reading from IndexedDB:",e),null}}async function Ps(){try{const e=await be(),t=e.transaction(ue,"readwrite"),s=t.objectStore(ue);await new Promise((o,r)=>{const i=s.clear();i.onsuccess=()=>o(),i.onerror=()=>r(i.error),t.oncomplete=()=>e.close()})}catch(e){console.error("Error clearing IndexedDB:",e)}}function zt(){return typeof indexedDB<"u"}async function Zt(e){try{const t=await be(),s=t.transaction(ue,"readwrite"),o=s.objectStore(ue);await new Promise((r,i)=>{const a=o.put(e);a.onsuccess=()=>r(),a.onerror=()=>i(a.error),s.oncomplete=()=>t.close()})}catch(t){throw console.error("Error adding item to IndexedDB:",t),t}}async function At(e){try{const t=await be(),s=t.transaction(ue,"readwrite"),o=s.objectStore(ue);await new Promise((r,i)=>{const a=o.put(e);a.onsuccess=()=>r(),a.onerror=()=>i(a.error),s.oncomplete=()=>t.close()})}catch(t){throw console.error("Error updating item in IndexedDB:",t),t}}async function Ds(e,t){if(e)try{const s=await be(),o=s.transaction(ue,"readwrite"),r=o.objectStore(ue);await new Promise((i,a)=>{const c=r.get(e);c.onsuccess=()=>{const l=c.result;if(!l){i();return}l.failed=t;const f=r.put(l);f.onsuccess=()=>i(),f.onerror=()=>a(f.error)},c.onerror=()=>a(c.error),o.oncomplete=()=>s.close()})}catch(s){console.error("Error updating failed flag:",s)}}async function Tt(e){try{const t=await be(),s=t.transaction(ue,"readwrite"),o=s.objectStore(ue);await new Promise((r,i)=>{const a=o.delete(e);a.onsuccess=()=>r(),a.onerror=()=>i(a.error),s.oncomplete=()=>t.close()})}catch(t){throw console.error("Error deleting item from IndexedDB:",t),t}}async function Nt(e){try{const t=await be(),s=t.transaction(ue,"readonly"),o=s.objectStore(ue);return new Promise((r,i)=>{const a=o.get(e);a.onsuccess=()=>{s.oncomplete=()=>t.close(),r(a.result||null)},a.onerror=()=>{s.oncomplete=()=>t.close(),i(a.error)}})}catch(t){return console.error("Error getting item from IndexedDB:",t),null}}async function Rt(e){try{const t=await be(),s=t.transaction(Te,"readwrite"),o=s.objectStore(Te);await new Promise((r,i)=>{const a=o.put({...e,timestamp:e.timestamp||Date.now(),retryCount:e.retryCount||0});a.onsuccess=()=>r(),a.onerror=()=>i(a.error),s.oncomplete=()=>{t.close(),_t()}})}catch(t){throw console.error("Error adding to offline queue:",t),t}}async function Mt(){try{const e=await be(),t=e.transaction(Te,"readonly"),s=t.objectStore(Te);return new Promise((o,r)=>{const i=s.getAll();i.onsuccess=()=>{t.oncomplete=()=>e.close(),o(i.result||[])},i.onerror=()=>{t.oncomplete=()=>e.close(),r(i.error)}})}catch(e){return console.error("Error getting offline queue:",e),[]}}async function nt(e){try{const t=await be(),s=t.transaction(Te,"readwrite"),o=s.objectStore(Te);await new Promise((r,i)=>{const a=o.delete(e);a.onsuccess=()=>r(),a.onerror=()=>i(a.error),s.oncomplete=()=>{t.close(),_t()}})}catch(t){throw console.error("Error removing from offline queue:",t),t}}async function Et(e){try{const t=await be(),s=t.transaction(Te,"readwrite"),o=s.objectStore(Te);await new Promise((r,i)=>{const a=o.put(e);a.onsuccess=()=>r(),a.onerror=()=>i(a.error),s.oncomplete=()=>{t.close(),_t()}})}catch(t){throw console.error("Error updating queue operation:",t),t}}async function Jt(e){if(!e)return[];try{const t=await be(),s=t.transaction(Te,"readonly"),r=s.objectStore(Te).index("itemId");return await new Promise((i,a)=>{const c=r.getAll(e);c.onsuccess=()=>{s.oncomplete=()=>t.close(),i(c.result||[])},c.onerror=()=>{s.oncomplete=()=>t.close(),a(c.error)}})}catch(t){return console.error("Error getting operations by itemId:",t),[]}}async function js(e){if(e)try{const t=await be(),s=t.transaction(Te,"readwrite"),r=s.objectStore(Te).index("itemId");await new Promise((i,a)=>{const c=r.openCursor(IDBKeyRange.only(e));c.onsuccess=()=>{const l=c.result;l?(l.delete(),l.continue()):i()},c.onerror=()=>a(c.error)}),s.oncomplete=()=>{t.close(),_t()}}catch(t){throw console.error("Error removing queue operations by itemId:",t),t}}async function Sn(){try{const e=await be(),t=e.transaction(it,"readonly"),s=t.objectStore(it);return new Promise((o,r)=>{const i=s.get("main");i.onsuccess=()=>{t.oncomplete=()=>e.close(),o(i.result||null)},i.onerror=()=>{t.oncomplete=()=>e.close(),r(i.error)}})}catch(e){return console.error("Error getting sync metadata:",e),null}}async function Qt(e){try{const t=await be(),s=t.transaction(it,"readwrite"),o=s.objectStore(it),r=await new Promise((a,c)=>{const l=o.get("main");l.onsuccess=()=>a(l.result||null),l.onerror=()=>c(l.error)}),i={key:"main",lastSyncTime:e.lastSyncTime??(r==null?void 0:r.lastSyncTime)??0,lastUpdated:e.lastUpdated??(r==null?void 0:r.lastUpdated)??Date.now()};await new Promise((a,c)=>{const l=o.put(i);l.onsuccess=()=>a(),l.onerror=()=>c(l.error)}),s.oncomplete=()=>t.close(),s.onerror=()=>{t.close()}}catch(t){throw console.error("Error updating sync metadata:",t),t}}const An=Object.freeze(Object.defineProperty({__proto__:null,addItemToDB:Zt,addToOfflineQueue:Rt,clearExpensesDB:Ps,deleteItemFromDB:Tt,getExpensesFromDB:rt,getItemFromDB:Nt,getOfflineQueue:Mt,getQueueOperationsByItemId:Jt,getSyncMetadata:Sn,isIndexedDBAvailable:zt,removeFromOfflineQueue:nt,removeQueueOperationsByItemId:js,saveExpensesToDB:Kt,setItemFailed:Ds,updateItemInDB:At,updateQueueOperation:Et,updateSyncMetadata:Qt},Symbol.toStringTag,{value:"Module"})),Tn="https://dev-expenses-api.pantheonsite.io";async function En(e,t){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};try{e({type:"REQUEST_LOGIN"});const r=await(await fetch(`${Tn}/user/login/google?_format=json`,s)).json();if(r.current_user)return e({type:"LOGIN_SUCCESS",payload:r}),localStorage.setItem("currentUser",JSON.stringify(r)),r;e({type:"LOGIN_ERROR",error:r.errors[0]})}catch(o){e({type:"LOGIN_ERROR",error:o})}}async function Gt(e,t){await e({type:"LOGOUT"}),await t({type:"REMOVE_DATA"}),localStorage.removeItem("currentUser"),localStorage.removeItem("token"),await Ps()}const Ze=[{value:"",label:"Category"},{value:"1",label:"Clothing"},{value:"2",label:"Entertainment"},{value:"3",label:"Food"},{value:"4",label:"Gifts"},{value:"5",label:"Household Items/Supplies"},{value:"6",label:"Housing"},{value:"7",label:"Medical / Healthcare"},{value:"8",label:"Personal"},{value:"9",label:"Transportation"},{value:"10",label:"Utilities"},{value:"11",label:"Travel"},{value:"12",label:"Family"},{value:"13",label:"Investment"},{value:"14",label:"Drinks"}],He=["January","February","March","April","May","June","July","August","September","October","November","December"],Pn={AED:"United Arab Emirates Dirham",AFN:"Afghan Afghani",ALL:"Albanian Lek",AMD:"Armenian Dram",ANG:"Netherlands Antillean Guilder",AOA:"Angolan Kwanza",ARS:"Argentine Peso",AUD:"Australian Dollar",AWG:"Aruban Florin",AZN:"Azerbaijani Manat",BAM:"Bosnia-Herzegovina Convertible Mark",BBD:"Barbadian Dollar",BDT:"Bangladeshi Taka",BGN:"Bulgarian Lev",BHD:"Bahraini Dinar",BIF:"Burundian Franc",BMD:"Bermudan Dollar",BND:"Brunei Dollar",BOB:"Bolivian Boliviano",BRL:"Brazilian Real",BSD:"Bahamian Dollar",BTC:"Bitcoin",BTN:"Bhutanese Ngultrum",BWP:"Botswanan Pula",BYN:"Belarusian Ruble",BZD:"Belize Dollar",CAD:"Canadian Dollar",CDF:"Congolese Franc",CHF:"Swiss Franc",CLF:"Chilean Unit of Account (UF)",CLP:"Chilean Peso",CNH:"Chinese Yuan (Offshore)",CNY:"Chinese Yuan",COP:"Colombian Peso",CRC:"Costa Rican Colón",CUC:"Cuban Convertible Peso",CUP:"Cuban Peso",CVE:"Cape Verdean Escudo",CZK:"Czech Republic Koruna",DJF:"Djiboutian Franc",DKK:"Danish Krone",DOP:"Dominican Peso",DZD:"Algerian Dinar",EGP:"Egyptian Pound",ERN:"Eritrean Nakfa",ETB:"Ethiopian Birr",EUR:"Euro",FJD:"Fijian Dollar",FKP:"Falkland Islands Pound",GBP:"British Pound Sterling",GEL:"Georgian Lari",GGP:"Guernsey Pound",GHS:"Ghanaian Cedi",GIP:"Gibraltar Pound",GMD:"Gambian Dalasi",GNF:"Guinean Franc",GTQ:"Guatemalan Quetzal",GYD:"Guyanaese Dollar",HKD:"Hong Kong Dollar",HNL:"Honduran Lempira",HRK:"Croatian Kuna",HTG:"Haitian Gourde",HUF:"Hungarian Forint",IDR:"Indonesian Rupiah",ILS:"Israeli New Sheqel",IMP:"Manx pound",INR:"Indian Rupee",IQD:"Iraqi Dinar",IRR:"Iranian Rial",ISK:"Icelandic Króna",JEP:"Jersey Pound",JMD:"Jamaican Dollar",JOD:"Jordanian Dinar",JPY:"Japanese Yen",KES:"Kenyan Shilling",KGS:"Kyrgystani Som",KHR:"Cambodian Riel",KMF:"Comorian Franc",KPW:"North Korean Won",KRW:"South Korean Won",KWD:"Kuwaiti Dinar",KYD:"Cayman Islands Dollar",KZT:"Kazakhstani Tenge",LAK:"Laotian Kip",LBP:"Lebanese Pound",LKR:"Sri Lankan Rupee",LRD:"Liberian Dollar",LSL:"Lesotho Loti",LYD:"Libyan Dinar",MAD:"Moroccan Dirham",MDL:"Moldovan Leu",MGA:"Malagasy Ariary",MKD:"Macedonian Denar",MMK:"Myanma Kyat",MNT:"Mongolian Tugrik",MOP:"Macanese Pataca",MRU:"Mauritanian Ouguiya",MUR:"Mauritian Rupee",MVR:"Maldivian Rufiyaa",MWK:"Malawian Kwacha",MXN:"Mexican Peso",MYR:"Malaysian Ringgit",MZN:"Mozambican Metical",NAD:"Namibian Dollar",NGN:"Nigerian Naira",NIO:"Nicaraguan Córdoba",NOK:"Norwegian Krone",NPR:"Nepalese Rupee",NZD:"New Zealand Dollar",OMR:"Omani Rial",PAB:"Panamanian Balboa",PEN:"Peruvian Nuevo Sol",PGK:"Papua New Guinean Kina",PHP:"Philippine Peso",PKR:"Pakistani Rupee",PLN:"Polish Zloty",PYG:"Paraguayan Guarani",QAR:"Qatari Rial",RON:"Romanian Leu",RSD:"Serbian Dinar",RUB:"Russian Ruble",RWF:"Rwandan Franc",SAR:"Saudi Riyal",SBD:"Solomon Islands Dollar",SCR:"Seychellois Rupee",SDG:"Sudanese Pound",SEK:"Swedish Krona",SGD:"Singapore Dollar",SHP:"Saint Helena Pound",SLL:"Sierra Leonean Leone",SOS:"Somali Shilling",SRD:"Surinamese Dollar",SSP:"South Sudanese Pound",STD:"São Tomé and Príncipe Dobra (pre-2018)",STN:"São Tomé and Príncipe Dobra",SVC:"Salvadoran Colón",SYP:"Syrian Pound",SZL:"Swazi Lilangeni",THB:"Thai Baht",TJS:"Tajikistani Somoni",TMT:"Turkmenistani Manat",TND:"Tunisian Dinar",TOP:"Tongan Pa'anga",TRY:"Turkish Lira",TTD:"Trinidad and Tobago Dollar",TWD:"New Taiwan Dollar",TZS:"Tanzanian Shilling",UAH:"Ukrainian Hryvnia",UGX:"Ugandan Shilling",USD:"United States Dollar",UYU:"Uruguayan Peso",UZS:"Uzbekistan Som",VEF:"Venezuelan Bolívar Fuerte (Old)",VES:"Venezuelan Bolívar Soberano",VND:"Vietnamese Dong",VUV:"Vanuatu Vatu",WST:"Samoan Tala",XAF:"CFA Franc BEAC",XAG:"Silver Ounce",XAU:"Gold Ounce",XCD:"East Caribbean Dollar",XDR:"Special Drawing Rights",XOF:"CFA Franc BCEAO",XPD:"Palladium Ounce",XPF:"CFP Franc",XPT:"Platinum Ounce",YER:"Yemeni Rial",ZAR:"South African Rand",ZMW:"Zambian Kwacha",ZWL:"Zimbabwean Dollar"},as={"":[],1:["haine","incaltaminte","pantaloni","tricouri"],2:["happy hour","benzinarie","ceai/cafea","restaurant","ingetata","ciocolata","parc","wiskey + cola","cinema"],3:["nr1","fourchette","kaufland","lunch","pegas","apa","inghetata","straus/glovo food","local","linela"],4:["flori"],5:["hartie igienica","sapun","praf de spalat","scutece","pasta de dinti","sampon","servetele"],6:["apartment rent"],7:["farmacie","stomatolog","pediatru"],8:["haircut","nails"],9:["benzina","motorina","car service","lichid parbriz","car wash","taxi","parcare"],10:["gaz","lumina","starnet","infocom","orange","infobon"],11:[],12:["Nelea","Leo"],13:["nunta","cumatrie"],14:["vin","bere","whiskey","cognac","gin","cocktails"]},Cs=["salary","bonus","freelance","overtime","interest","gift","cashback","sale","loan"],de={SUCCESS:"success",ERROR:"error"},Yt={"bondi-blue":"Bondi blue","maximum-green-yellow":"Maximum green yellow","carrot-orange":"Carrot orange",saffron:"Saffron",cadetblue:"Cadet blue","blue-pink-gradient":"Blue pink gradient","pearl-aqua":"Pearl aqua","cambridge-blue":"Cambridge blue","malachite-green":"Malachite green","deep-space-indigo":"Deep space indigo"};let tt=null,$t="",yt="";const Dn=()=>{if(tt===null)try{const e=localStorage.getItem("currentUser");tt=e?JSON.parse(e):"",$t=(tt==null?void 0:tt.jwt_token)||""}catch{tt="",$t=""}return tt},jn=()=>{if(!yt)try{const e=localStorage.getItem("theme");yt=e?JSON.parse(e):""}catch{yt=""}return yt},dt=Dn(),Cn=$t,_n=jn();var us;const Nn={userDetails:dt,token:Cn,loading:!1,errorMessage:null,userIsLoggedIn:!!dt,currency:((us=dt==null?void 0:dt.current_user)==null?void 0:us.currency)||"MDL",theme:_n||"blue-pink-gradient"},es={groupedData:null,totals:null,filtered:null,raw:[],incomeData:null,incomeTotals:null,categoryTotals:[],loading:!0,totalSpent:0,changedItems:{},incomeTextFilter:"",incomeSelectedTags:[],filteredIncomeData:null},Rn=(e,t)=>{switch(t.type){case"REQUEST_LOGIN":return{...e,loading:!0};case"LOGIN_SUCCESS":return{...e,userDetails:t.payload,token:t.payload.jwt_token,loading:!1,userIsLoggedIn:!0,currency:t.payload.current_user.currency||"MDL"};case"UPDATE_USER":return{...e,...t.payload};case"LOGOUT":return{...e,user:"",token:"",userIsLoggedIn:!1};case"LOGIN_ERROR":return{...e,loading:!1,errorMessage:t.error};default:throw new Error(`Unhandled action type: ${t.type}`)}},Mn=(e,t)=>{switch(t.type){case"SET_DATA":const s=kn(e.raw,t.raw),o=e.category||"",r=e.textFilter||"",i=e.incomeTextFilter||"",a=e.incomeSelectedTags||[],c={...e,...t,category:o,textFilter:r,incomeTextFilter:i,incomeSelectedTags:a,changedItems:{...e.changedItems,...s}};let l=null,f=null;if((o||r)&&c.raw){let T=c.raw.filter(u=>u.type==="transaction")||[];if(o&&(T=T.filter(u=>u.cat===o)),r){const u=r.toLowerCase();T=T.filter(g=>{var m,v;return(v=(m=g.dsc)==null?void 0:m.toLowerCase())==null?void 0:v.includes(u)})}f=T,l=T.reduce((u,g)=>{var C;const m=new Date(g.dt),v=m.getFullYear(),E=`${He[m.getMonth()]} ${v}`;u.groupedData[E]=u.groupedData[E]||[],u.groupedData[E].push(g),u.totals[E]=(u.totals[E]||0)+parseFloat(g.sum),u.totalSpent=u.totalSpent+parseFloat(g.sum),u.totalsPerYearAndMonth[v]=u.totalsPerYearAndMonth[v]||{},u.totalsPerYearAndMonth[v][E]=(u.totalsPerYearAndMonth[v][E]||0)+parseFloat(g.sum),u.totalPerYear[v]=(u.totalPerYear[v]||0)+parseFloat(g.sum);const D=g.cat;return D!==void 0&&(u.categoryTotals[D]||(u.categoryTotals[D]={name:"",y:0}),u.categoryTotals[D].name=((C=Ze[D])==null?void 0:C.label)||"",u.categoryTotals[D].y+=parseFloat(g.sum)||0),u},{groupedData:{},totals:{},totalsPerYearAndMonth:{},totalPerYear:{},totalSpent:0,categoryTotals:{}})}else l=null,f=null;let p=null;if((i||a.length>0)&&c.incomeData){let T=[...c.incomeData];if(i){const u=i.toLowerCase();T=T.filter(g=>{var m,v;return(v=(m=g.dsc)==null?void 0:m.toLowerCase())==null?void 0:v.includes(u)})}a.length>0&&(T=T.filter(u=>u.dsc?a.every(g=>new RegExp(`#${g}\\b`,"i").test(u.dsc)):!1)),p=T}return{...c,filtered:l,filtered_raw:f,filteredIncomeData:p};case"CLEAR_CHANGED_ITEM":const w={...e.changedItems};return delete w[t.id],{...e,changedItems:w};case"FILTER_DATA":if((t.category!==""||t.textFilter!=="")&&e.raw){const{raw:T}=e;let u=(T==null?void 0:T.filter(m=>m.type==="transaction"))||[];if(t.category&&(u=u.filter(m=>m.cat===t.category)),t.textFilter){const m=t.textFilter.toLowerCase();u=u.filter(v=>{var E,D;return(D=(E=v.dsc)==null?void 0:E.toLowerCase())==null?void 0:D.includes(m)})}const g=u.reduce((m,v)=>{var P;const E=new Date(v.dt),D=E.getFullYear(),C=`${He[E.getMonth()]} ${D}`;m.groupedData[C]=m.groupedData[C]||[],m.groupedData[C].push(v),m.totals[C]=(m.totals[C]||0)+parseFloat(v.sum),m.totalSpent=m.totalSpent+parseFloat(v.sum),m.totalsPerYearAndMonth[D]=m.totalsPerYearAndMonth[D]||{},m.totalsPerYearAndMonth[D][C]=(m.totalsPerYearAndMonth[D][C]||0)+parseFloat(v.sum),m.totalPerYear[D]=(m.totalPerYear[D]||0)+parseFloat(v.sum);const A=v.cat;return A!==void 0&&(m.categoryTotals[A]||(m.categoryTotals[A]={name:"",y:0}),m.categoryTotals[A].name=((P=Ze[A])==null?void 0:P.label)||"",m.categoryTotals[A].y+=parseFloat(v.sum)||0),m},{groupedData:{},totals:{},totalsPerYearAndMonth:{},totalPerYear:{},totalSpent:0,categoryTotals:{}});return{...e,filtered:g,category:t.category,textFilter:t.textFilter,filtered_raw:u}}return{...e,filtered:null,category:"",textFilter:"",filtered_raw:null};case"FILTER_INCOME_DATA":if((t.textFilter!==""||t.selectedTags&&t.selectedTags.length>0)&&e.incomeData){const{incomeData:T}=e;let u=[...T];if(t.textFilter){const g=t.textFilter.toLowerCase();u=u.filter(m=>{var v,E;return(E=(v=m.dsc)==null?void 0:v.toLowerCase())==null?void 0:E.includes(g)})}return t.selectedTags&&t.selectedTags.length>0&&(u=u.filter(g=>g.dsc?t.selectedTags.every(m=>new RegExp(`#${m}\\b`,"i").test(g.dsc)):!1)),{...e,filteredIncomeData:u,incomeTextFilter:t.textFilter||"",incomeSelectedTags:t.selectedTags||[]}}return{...e,filteredIncomeData:null,incomeTextFilter:"",incomeSelectedTags:[]};case"REMOVE_DATA":return es;default:throw new Error(`Unhandled action type: ${t.type}`)}},kn=(e,t)=>{const s={};if(e.length===0)return s;const o=new Map(e.map(a=>[a.id,a])),r=new Map(t.map(a=>[a.id,a])),i=(a,c)=>a.dt!==c.dt||a.sum!==c.sum||a.cat!==c.cat||a.dsc!==c.dsc||a.type!==c.type||a.cr!==c.cr;return t.forEach(a=>{const c=o.get(a.id);c?i(c,a)&&(s[a.id]={type:"updated",data:a}):s[a.id]={type:"new",data:a}}),e.forEach(a=>{r.has(a.id)||(s[a.id]={type:"removed",data:a})}),s},_s=ie.createContext(null),Ns=ie.createContext(null),Rs=ie.createContext({data:{...es},dataDispatch:()=>{}});function xe(){const e=ie.useContext(_s);if(e===void 0)throw new Error("useAuthState must be used within a AuthProvider");return e}function pe(){const e=ie.useContext(Rs);if(e===void 0)throw new Error("useData must be used within a AuthProvider");return e}function Xe(){const e=ie.useContext(Ns);if(e===void 0)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}const In=({children:e})=>{const[t,s]=b.useReducer(Rn,Nn),[o,r]=b.useReducer(Mn,es);return n.jsx(_s.Provider,{value:t,children:n.jsx(Ns.Provider,{value:s,children:n.jsx(Rs.Provider,{value:{data:o,dataDispatch:r},children:e})})})},Fn=({message:e,type:t})=>n.jsx("div",{className:`notification ${t}`,children:e}),Ms=b.createContext(()=>{}),pt=()=>b.useContext(Ms),Ln=({children:e})=>{const[t,s]=b.useState({message:"",type:""});let{theme:o}=xe();o=Yt[o]?o:"blue-pink-gradient";const r=o==="blue-pink-gradient"?"has-gradient-accent":"",i=(a,c)=>{s({message:a,type:c});let l=2e3;c===de.ERROR&&(l=4e3),setTimeout(()=>{s({message:"",type:""})},l)};return n.jsx("div",{className:`${o} ${r}`,children:n.jsxs(Ms.Provider,{value:i,children:[e,t&&n.jsx(Fn,{message:t.message,type:t.type})]})})},ks=b.createContext(void 0);function Is(){const e=b.useContext(ks);if(e===void 0)throw new Error("useSyncStatus must be used within a SyncStatusProvider");return e}function On({children:e}){const[t,s]=b.useState(typeof navigator<"u"?navigator.onLine:!0),[o,r]=b.useState(0),i=o>0,[a,c]=b.useState(!1),[l,f]=b.useState(new Set),[p,w]=b.useState(0),[T,u]=b.useState(new Set),[g,m]=b.useState(t?"synced":"offline"),v=b.useRef(null),E=b.useRef(p),D=b.useRef(i);b.useEffect(()=>{E.current=p},[p]),b.useEffect(()=>{D.current=i},[i]),b.useEffect(()=>{const d=()=>{s(!0),m(E.current>0?"pending":"synced")},h=()=>{s(!1),m("offline")};return window.addEventListener("online",d),window.addEventListener("offline",h),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",h)}},[]);const C=b.useCallback(()=>{r(d=>d+1),c(!1),typeof navigator<"u"&&navigator.onLine&&m("syncing")},[]),A=b.useCallback(d=>{r(h=>Math.max(0,h-1)),d&&(c(!0),v.current&&window.clearTimeout(v.current),v.current=window.setTimeout(()=>{c(!1)},3e3)),m(()=>typeof navigator<"u"&&!navigator.onLine?"offline":E.current>0?d?"pending":"syncing":d?"synced":"pending")},[]),P=b.useCallback(d=>{f(h=>{const y=new Set(h);return y.add(d),y}),window.setTimeout(()=>{f(h=>{const y=new Set(h);return y.delete(d),y})},3e3)},[]),j=b.useCallback(async()=>{const d=await Mt(),h=d.map(y=>y.itemId).filter(y=>!!y);w(d.length),u(new Set(h)),m(()=>typeof navigator<"u"&&!navigator.onLine?"offline":d.length>0?D.current?"syncing":"pending":D.current?"syncing":"synced")},[]);return b.useEffect(()=>{j()},[j]),b.useEffect(()=>(is({onSyncStart:C,onSyncFinish:A,onItemSynced:P,onQueueUpdated:j}),()=>{is(null),v.current&&window.clearTimeout(v.current)}),[A,P,j,C]),n.jsx(ks.Provider,{value:{isOnline:t,isSyncing:i,syncSuccess:a,syncedItems:l,status:g,pendingCount:p,pendingItemIds:T,startSyncing:C,finishSyncing:A,markItemSynced:P,refreshQueueState:j},children:e})}const Bn=({component:e,isPrivate:t})=>{const{token:s}=xe();return t&&!s?n.jsx(Js,{to:"/expenses/login"}):n.jsx(e,{})},Un="modulepreload",zn=function(e){return"/expenses/"+e},ls={},Ne=function(t,s,o){let r=Promise.resolve();if(s&&s.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.all(s.map(l=>{if(l=zn(l),l in ls)return;ls[l]=!0;const f=l.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(!!o)for(let u=i.length-1;u>=0;u--){const g=i[u];if(g.href===l&&(!f||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${p}`))return;const T=document.createElement("link");if(T.rel=f?"stylesheet":Un,f||(T.as="script",T.crossOrigin=""),T.href=l,c&&T.setAttribute("nonce",c),document.head.appendChild(T),f)return new Promise((u,g)=>{T.addEventListener("load",u),T.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})};var Fs={exports:{}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){var s=t?t._modules:{};function o(r,i,a,c){r.hasOwnProperty(i)||(r[i]=c.apply(null,a),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:r[i]}})))}o(s,"Extensions/Themes/DarkUnica.js",[s["Core/Defaults.js"],s["Core/Utilities.js"]],function(r,i){var a,c;let{setOptions:l}=r,{createElement:f}=i;return(c=a||(a={})).options={colors:["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{linearGradient:{x1:0,y1:0,x2:1,y2:1},stops:[[0,"#2a2a2b"],[1,"#3e3e40"]]},style:{fontFamily:"'Unica One', sans-serif"},plotBorderColor:"#606063"},title:{style:{color:"#E0E0E3",textTransform:"uppercase",fontSize:"20px"}},subtitle:{style:{color:"#E0E0E3",textTransform:"uppercase"}},xAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:"#F0F0F0"}},plotOptions:{series:{dataLabels:{color:"#F0F0F3",style:{fontSize:"13px"}},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{backgroundColor:"rgba(0, 0, 0, 0.5)",itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"},title:{style:{color:"#C0C0C0"}}},credits:{style:{color:"#666"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"}},c.apply=function(){f("link",{href:"https://fonts.googleapis.com/css?family=Unica+One",rel:"stylesheet",type:"text/css"},null,document.getElementsByTagName("head")[0]),l(c.options)},a}),o(s,"masters/themes/dark-unica.src.js",[s["Core/Globals.js"],s["Extensions/Themes/DarkUnica.js"]],function(r,i){return r.theme=i.options,i.apply(),r})})})(Fs);var Gn=Fs.exports;const Yn=Xt(Gn),Vt=(e,t)=>{if(typeof Worker<"u")try{const s=new Worker(new URL("/expenses/assets/dataProcessor.worker-DbprmSrf.js",import.meta.url),{type:"module"});s.onmessage=o=>{t(o.data),s.terminate()},s.onerror=o=>{console.warn("Web Worker error, falling back to main thread:",o),cs(e,t),s.terminate()},s.postMessage(e);return}catch(s){console.warn("Web Worker not available, using main thread:",s)}cs(e,t)},cs=(e,t)=>{const s={},o={},r={},i=[],a={},c={},l={},f={},p={};let w=0;const T=(g,m)=>{o[g]||(o[g]={}),o[g][m]||(o[g][m]=0),s[m]||(s[m]=[]),a[m]||(a[m]=0),c[m]||(c[m]=0),f[g]||(f[g]={}),f[g][m]||(f[g][m]=0),l[g]||(l[g]=0),r[g]||(r[g]=0)},u=(g,m,v)=>{const{cat:E,sum:D,type:C}=g;if(C==="incomes")l[m]=l[m]+parseFloat(D),f[m][v]+=parseFloat(D),i.push(g),c[v]=parseFloat((c[v]+parseFloat(D)).toFixed(2));else if(C==="transaction"){if(s[v].push(g),a[v]=parseFloat((a[v]+parseFloat(D)).toFixed(2)),E&&p[E]){const A=E;p[A].name=Ze[A].label,p[A].y=parseFloat((p[A].y+parseFloat(D)).toFixed(2))}w=w+parseFloat(D),o[m][v]+=parseFloat(D),r[m]=r[m]+parseFloat(D)}};e&&e.forEach(g=>{const{dt:m,cat:v}=g,E=new Date(m),D=E.getFullYear(),C=`${He[E.getMonth()]} ${D}`;v&&!p[v]&&(p[v]={name:"",y:0}),T(D,C),u(g,D,C)}),t({groupedData:s,totalsPerYearAndMonth:o,totalPerYear:r,incomeData:i,monthsTotals:a,incomeTotals:c,totalIncomePerYear:l,totalIncomePerYearAndMonth:f,categoryTotals:p,totalSpent:w})},Ht=(e,t,s,o="",r="")=>{s({type:"SET_DATA",raw:e,groupedData:t.groupedData,totals:t.monthsTotals,incomeData:t.incomeData,incomeTotals:t.incomeTotals,categoryTotals:t.categoryTotals,loading:!1,totalsPerYearAndMonth:t.totalsPerYearAndMonth,totalIncomePerYear:t.totalIncomePerYear,totalIncomePerYearAndMonth:t.totalIncomePerYearAndMonth,totalPerYear:t.totalPerYear,totalSpent:t.totalSpent})};let ut=null,ht=null;function $n(e,t){ut=e,ht=t}async function Vn(e,t){if(e.status===403){const s={method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json",...t==null?void 0:t.headers})};try{if((await fetch("https://dev-expenses-api.pantheonsite.io/jwt/token",s)).status===403){if(ut&&ht)return console.warn("JWT token expired, logging out user"),await Gt(ut,ht),!0;console.error("Authentication error detected but dispatch functions not initialized")}}catch(o){if(console.error("Error verifying token:",o),ut&&ht)return console.warn("Token verification failed, logging out user"),await Gt(ut,ht),!0}}return!1}async function kt(e,t){return e.status===403?await Vn(e,t):!1}const Hn=async(e,t,s,o)=>e.ok?e.json():(e.status===403&&await kt(e,t),e.statusText),Ls=e=>{const t=[];for(const s in e){const o={name:s,data:[]};for(const r of He)if(e[s][`${r} ${s}`]){const i=e[s][`${r} ${s}`];o.data.push([r,i])}o.data.length>0&&t.push(o)}return t},Os=(e,t,s,o,r)=>{fetch(e,t).then(async i=>await Hn(i,t)).then(i=>r(i)).catch(i=>console.log(i))},Bs=async(e,t,s)=>{const{deleteItemOffline:o}=await Ne(()=>Promise.resolve().then(()=>fr),void 0),{getItemFromDB:r}=await Ne(()=>Promise.resolve().then(()=>An),void 0),i=await r(e),a=(i==null?void 0:i.type)==="transaction"?"transaction":"incomes";await o(e,a,t,()=>{s({ok:!0,status:200,statusText:"OK"})},c=>{s({ok:!1,status:500,statusText:c})})},Le=async(e,t,s,o="",r="")=>{if(zt()){const l=await rt();l&&l.length>0&&Vt(l,f=>{Ht(l,f,t,o,r)})}const{syncWithServer:i,syncPendingOperations:a,AuthenticationError:c}=await Ne(()=>Promise.resolve().then(()=>ur),void 0);try{await a(e),await i(e,t,o,r)}catch(l){if(l instanceof c){console.warn("Authentication failed during sync, user logged out");return}console.error("Error during sync:",l);const f={method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":"Bearer "+e})};Os("https://dev-expenses-api.pantheonsite.io/api/expenses",f,t,s,async p=>{zt()&&await Kt(p),Vt(p,w=>{Ht(p,w,t,o,r)})})}},Ae=e=>{const t=parseFloat(e);if(isNaN(t))return"Invalid Input";{let s=t.toFixed(2);return s.endsWith(".00")&&(s=s.slice(0,-3)),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),s}},Xn=Ze.reduce((e,t)=>(e[t.value]=t.label,e),{}),Us=e=>{if(!e)return[];const t=/#([a-zA-Z0-9\/]+(?:\s+[a-zA-Z0-9\/]+)*)/g,s=e.match(t);return s?s.map(o=>o.substring(1)):[]},ft=(e,t)=>{if(!e||!t)return!1;const s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`#${s}\\b`,"i").test(e)},zs=(e,t)=>{if(!t)return e;const s=(e==null?void 0:e.trim())||"";if(ft(s,t))return s;const o=`#${t}`;return s?`${s} ${o}`:o},Gs=(e,t)=>{if(!e||!t)return e;const s=new RegExp(`\\s*#${t}\\b`,"gi");return e.replace(s,"").trim()};function Wn(){const{data:e,dataDispatch:t}=pe(),[s,o]=b.useState({category:e.category??"",textFilter:e.textFilter??""}),[r,i]=b.useState(!1),a=b.useRef(null),c=b.useRef(null),l=b.useRef(s);b.useEffect(()=>{l.current=s},[s]),b.useEffect(()=>{const u=e.category??"",g=e.textFilter??"",m=l.current.category,v=l.current.textFilter;(u!==m||g!==v)&&o({category:u,textFilter:g})},[]),b.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]);const f=b.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{const u=l.current;t({type:"FILTER_DATA",category:u.category,textFilter:u.textFilter}),c.current=null},300)},[t]),p=b.useCallback(u=>{const g=u.target.value;o(m=>({...m,category:g})),c.current&&(clearTimeout(c.current),c.current=null),t({type:"FILTER_DATA",category:g,textFilter:l.current.textFilter})},[t]),w=b.useCallback(u=>{const g=u.target.value;o(m=>({...m,textFilter:g})),f()},[f]),T=b.useCallback(()=>{c.current&&(clearTimeout(c.current),c.current=null),o({category:"",textFilter:""}),i(!1),t({type:"FILTER_DATA",category:"",textFilter:""})},[t]);return b.useLayoutEffect(()=>{r&&a.current&&a.current.focus()},[r]),n.jsxs("div",{className:"filters",children:[n.jsx("div",{className:"filters__search",children:r?n.jsxs("div",{className:"filters__search-input-wrapper",children:[n.jsx(Bt,{size:18,className:"filters__search-icon"}),n.jsx("input",{ref:a,type:"text",value:s.textFilter,name:"textFilter",onChange:w,placeholder:"Filter by text",className:"filters__input"}),n.jsx("button",{className:"filters__close-button",onClick:()=>{c.current&&(clearTimeout(c.current),c.current=null),i(!1),o(u=>({...u,textFilter:""})),t({type:"FILTER_DATA",category:l.current.category,textFilter:""})},"aria-label":"Close search",children:n.jsx(fs,{size:16})})]}):n.jsx("button",{className:"filters__search-button",onClick:()=>i(!0),"aria-label":"Search",children:n.jsx(Bt,{size:18})})}),n.jsx("select",{value:s.category,name:"category",onChange:p,className:"filters__select",children:Ze.map((u,g)=>n.jsx("option",{value:u.value,children:u.label},g))}),(s.textFilter||s.category)&&n.jsx("button",{onClick:T,className:"filters__clear-button",children:"Clear Filters"})]})}const Ys=ie.memo(Wn);function qn(){var l,f;const{data:e}=pe(),t=e.filtered||e,{currency:s}=xe();b.useEffect(()=>{},[e,s]);const o=(l=e.raw[e.raw.length-1])==null?void 0:l.dt,i=((new Date().getTime()-new Date(o).getTime())/864e5+1)/30.42,a=t.totalSpent/i,c={chart:{type:"column",zoomType:"x"},title:{text:"Monthly Totals"},xAxis:{categories:t.totals?Object.keys(t.totals).reverse():[],crosshair:!0},yAxis:{min:0,title:{text:s},stackLabels:{style:{color:"#FFFFFF",fontWeight:"bold"},enabled:!0,verticalAlign:"top"},plotLines:[{color:"#00a8ad",value:a,width:"1",zIndex:4,dashStyle:"ShortDot"}]},plotOptions:{column:{pointPadding:.2,borderWidth:0,stacking:"normal",groupPadding:0}},credits:{enabled:!1},tooltip:{shared:!0},series:[{name:e.category?(f=Ze.find(p=>p.value===e.category))==null?void 0:f.label:"Monthly totals",data:t.totals?Object.values(t.totals).reverse():[],colorByPoint:!0},{name:"Income",type:"spline",color:"#4DD0E1",visible:!1,data:t.incomeTotals?Object.values(t.incomeTotals).reverse().map(function(p){return p}):[]}]};return n.jsx(Wt,{highcharts:Re,options:c})}function Kn(){var a,c,l,f;const{data:e}=pe(),{currency:t}=xe(),s=((a=e==null?void 0:e.filtered)==null?void 0:a.totalsPerYearAndMonth)||(e==null?void 0:e.totalsPerYearAndMonth),o=((c=e==null?void 0:e.filtered)==null?void 0:c.totalPerYear)||(e==null?void 0:e.totalPerYear);b.useEffect(()=>{},[e==null?void 0:e.totalsPerYearAndMonth,(l=e==null?void 0:e.filtered)==null?void 0:l.totalsPerYearAndMonth,e==null?void 0:e.totalPerYear,(f=e==null?void 0:e.filtered)==null?void 0:f.totalPerYear]);const r=Ls(s),i={chart:{type:"line",zoomType:"x"},boost:{useGPUTranslations:!0},title:{text:"Years in review"},xAxis:{type:"category",categories:He,crosshair:!0},yAxis:{title:{text:t}},tooltip:{shared:!0,split:!0},credits:{enabled:!1},series:r};return n.jsxs(n.Fragment,{children:[n.jsx(Wt,{highcharts:Re,options:i}),n.jsx("span",{className:"heading",children:"Total spent per year:"}),n.jsx("table",{className:"daily-average",children:n.jsx("tbody",{children:Object.entries(o).map((p,w)=>n.jsxs("tr",{children:[n.jsx("td",{children:p[0]}),n.jsxs("td",{children:[Ae(p[1])," ",t]})]},w))})})]})}function Zn(){const{data:e}=pe(),t=e.filtered_raw?e.filtered_raw.length:e.raw?e.raw.filter(s=>s.type==="transaction").length:0;return n.jsxs("div",{className:"total-transactions-count",style:{padding:"0.5rem 1rem",textAlign:"center",fontSize:"0.9rem",color:"#a0a0a0",fontWeight:"400"},children:[t.toLocaleString()," transactions"]})}var $s={exports:{}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){var s=t?t._modules:{};function o(r,i,a,c){r.hasOwnProperty(i)||(r[i]=c.apply(null,a),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:r[i]}})))}o(s,"Extensions/Boost/Boostables.js",[],function(){return["area","areaspline","arearange","column","columnrange","bar","line","scatter","heatmap","bubble","treemap"]}),o(s,"Extensions/Boost/BoostableMap.js",[s["Extensions/Boost/Boostables.js"]],function(r){let i={};return r.forEach(a=>{i[a]=!0}),i}),o(s,"Extensions/Boost/BoostChart.js",[s["Extensions/Boost/BoostableMap.js"],s["Core/Globals.js"],s["Core/Utilities.js"]],function(r,i,a){let{composed:c}=i,{addEvent:l,pick:f,pushUnique:p}=a;function w(u){let g=u.series,m=u.boost=u.boost||{},v=u.options.boost||{},E=f(v.seriesThreshold,50);if(g.length>=E)return!0;if(g.length===1)return!1;let D=v.allowForce;if(D===void 0){for(let j of(D=!0,u.xAxis))if(f(j.min,-1/0)>f(j.dataMin,-1/0)||f(j.max,1/0)<f(j.dataMax,1/0)){D=!1;break}}if(m.forceChartBoost!==void 0){if(D)return m.forceChartBoost;m.forceChartBoost=void 0}let C=0,A=0,P;for(let j of g)(P=j.options).boostThreshold!==0&&j.visible!==!1&&j.type!=="heatmap"&&(r[j.type]&&++C,function(...d){let h=-Number.MAX_VALUE;return d.forEach(function(y){if(y!=null&&y.length!==void 0&&y.length>0)return h=y.length,!0}),h}(j.processedXData,P.data,j.points)>=(P.boostThreshold||Number.MAX_VALUE)&&++A);return m.forceChartBoost=D&&(C===g.length&&A===C||A>5),m.forceChartBoost}function T(u){function g(){u.boost&&u.boost.wgl&&w(u)&&u.boost.wgl.render(u)}l(u,"predraw",function(){var E,D;u.boost=u.boost||{},u.boost.forceChartBoost=void 0,u.boosted=!1,u.axes.some(C=>C.isPanning)||((D=(E=u.boost).clear)==null||D.call(E)),u.boost.canvas&&u.boost.wgl&&w(u)&&u.boost.wgl.allocateBuffer(u),u.boost.markerGroup&&u.xAxis&&u.xAxis.length>0&&u.yAxis&&u.yAxis.length>0&&u.boost.markerGroup.translate(u.xAxis[0].pos,u.yAxis[0].pos)}),l(u,"load",g,{order:-1}),l(u,"redraw",g);let m=-1,v=-1;l(u.pointer,"afterGetHoverData",()=>{let E=u.hoverSeries;if(u.boost=u.boost||{},u.boost.markerGroup&&E){let D=u.inverted?E.yAxis:E.xAxis,C=u.inverted?E.xAxis:E.yAxis;(D&&D.pos!==m||C&&C.pos!==v)&&(u.boost.markerGroup.translate(D.pos,C.pos),m=D.pos,v=C.pos)}})}return{compose:function(u,g){return g&&p(c,"Boost.Chart")&&u.prototype.callbacks.push(T),u},getBoostClipRect:function(u,g){let m={x:u.plotLeft,y:u.plotTop,width:u.plotWidth,height:u.navigator?u.navigator.top+u.navigator.height-u.plotTop:u.plotHeight};if(g.getClipBox){let{xAxis:v,yAxis:E}=g;if(m=g.getClipBox(),u.inverted){let D=m.width;m.width=m.height,m.height=D,m.x=E.pos,m.y=v.pos}else m.x=v.pos,m.y=E.pos}if(g===u){let v=u.inverted?u.xAxis:u.yAxis;v.length<=1&&(m.y=Math.min(v[0].pos,m.y),m.height=v[0].pos-u.plotTop+v[0].len)}return m},isChartSeriesBoosting:w}}),o(s,"Extensions/Boost/WGLDrawMode.js",[],function(){return{area:"LINES",arearange:"LINES",areaspline:"LINES",column:"LINES",columnrange:"LINES",bar:"LINES",line:"LINE_STRIP",scatter:"POINTS",heatmap:"TRIANGLES",treemap:"TRIANGLES",bubble:"POINTS"}}),o(s,"Extensions/Boost/WGLShader.js",[s["Core/Utilities.js"]],function(r){let{clamp:i,error:a,pick:c}=r;return class{constructor(l){this.errors=[],this.uLocations={},this.gl=l,l&&this.createShader()}bind(){this.gl&&this.shaderProgram&&this.gl.useProgram(this.shaderProgram)}createShader(){let l=this.stringToProgram(`#version 100
#define LN10 2.302585092994046
precision highp float;
attribute vec4 aVertexPosition;
attribute vec4 aColor;
varying highp vec2 position;
varying highp vec4 vColor;
uniform mat4 uPMatrix;
uniform float pSize;
uniform float translatedThreshold;
uniform bool hasThreshold;
uniform bool skipTranslation;
uniform float xAxisTrans;
uniform float xAxisMin;
uniform float xAxisMinPad;
uniform float xAxisPointRange;
uniform float xAxisLen;
uniform bool  xAxisPostTranslate;
uniform float xAxisOrdinalSlope;
uniform float xAxisOrdinalOffset;
uniform float xAxisPos;
uniform bool  xAxisCVSCoord;
uniform bool  xAxisIsLog;
uniform bool  xAxisReversed;
uniform float yAxisTrans;
uniform float yAxisMin;
uniform float yAxisMinPad;
uniform float yAxisPointRange;
uniform float yAxisLen;
uniform bool  yAxisPostTranslate;
uniform float yAxisOrdinalSlope;
uniform float yAxisOrdinalOffset;
uniform float yAxisPos;
uniform bool  yAxisCVSCoord;
uniform bool  yAxisIsLog;
uniform bool  yAxisReversed;
uniform bool  isBubble;
uniform bool  bubbleSizeByArea;
uniform float bubbleZMin;
uniform float bubbleZMax;
uniform float bubbleZThreshold;
uniform float bubbleMinSize;
uniform float bubbleMaxSize;
uniform bool  bubbleSizeAbs;
uniform bool  isInverted;
float bubbleRadius(){
float value = aVertexPosition.w;
float zMax = bubbleZMax;
float zMin = bubbleZMin;
float radius = 0.0;
float pos = 0.0;
float zRange = zMax - zMin;
if (bubbleSizeAbs){
value = value - bubbleZThreshold;
zMax = max(zMax - bubbleZThreshold, zMin - bubbleZThreshold);
zMin = 0.0;
}
if (value < zMin){
radius = bubbleZMin / 2.0 - 1.0;
} else {
pos = zRange > 0.0 ? (value - zMin) / zRange : 0.5;
if (bubbleSizeByArea && pos > 0.0){
pos = sqrt(pos);
}
radius = ceil(bubbleMinSize + pos * (bubbleMaxSize - bubbleMinSize)) / 2.0;
}
return radius * 2.0;
}
float translate(float val,
float pointPlacement,
float localA,
float localMin,
float minPixelPadding,
float pointRange,
float len,
bool  cvsCoord,
bool  isLog,
bool  reversed
){
float sign = 1.0;
float cvsOffset = 0.0;
if (cvsCoord) {
sign *= -1.0;
cvsOffset = len;
}
if (isLog) {
val = log(val) / LN10;
}
if (reversed) {
sign *= -1.0;
cvsOffset -= sign * len;
}
return sign * (val - localMin) * localA + cvsOffset + 
(sign * minPixelPadding);
}
float xToPixels(float value) {
if (skipTranslation){
return value;// + xAxisPos;
}
return translate(value, 0.0, xAxisTrans, xAxisMin, xAxisMinPad, xAxisPointRange, xAxisLen, xAxisCVSCoord, xAxisIsLog, xAxisReversed);// + xAxisPos;
}
float yToPixels(float value, float checkTreshold) {
float v;
if (skipTranslation){
v = value;// + yAxisPos;
} else {
v = translate(value, 0.0, yAxisTrans, yAxisMin, yAxisMinPad, yAxisPointRange, yAxisLen, yAxisCVSCoord, yAxisIsLog, yAxisReversed);// + yAxisPos;
if (v > yAxisLen) {
v = yAxisLen;
}
}
if (checkTreshold > 0.0 && hasThreshold) {
v = min(v, translatedThreshold);
}
return v;
}
void main(void) {
if (isBubble){
gl_PointSize = bubbleRadius();
} else {
gl_PointSize = pSize;
}
vColor = aColor;
if (skipTranslation && isInverted) {
gl_Position = uPMatrix * vec4(aVertexPosition.y + yAxisPos, aVertexPosition.x + xAxisPos, 0.0, 1.0);
} else if (isInverted) {
gl_Position = uPMatrix * vec4(yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, xToPixels(aVertexPosition.x) + xAxisPos, 0.0, 1.0);
} else {
gl_Position = uPMatrix * vec4(xToPixels(aVertexPosition.x) + xAxisPos, yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, 0.0, 1.0);
}
}`,"vertex"),f=this.stringToProgram(`precision highp float;
uniform vec4 fillColor;
varying highp vec2 position;
varying highp vec4 vColor;
uniform sampler2D uSampler;
uniform bool isCircle;
uniform bool hasColor;
void main(void) {
vec4 col = fillColor;
vec4 tcol = texture2D(uSampler, gl_PointCoord.st);
if (hasColor) {
col = vColor;
}
if (isCircle) {
col *= tcol;
if (tcol.r < 0.0) {
discard;
} else {
gl_FragColor = col;
}
} else {
gl_FragColor = col;
}
}`,"fragment"),p=w=>this.gl.getUniformLocation(this.shaderProgram,w);return l&&f?(this.shaderProgram=this.gl.createProgram(),this.gl.attachShader(this.shaderProgram,l),this.gl.attachShader(this.shaderProgram,f),this.gl.linkProgram(this.shaderProgram),this.gl.getProgramParameter(this.shaderProgram,this.gl.LINK_STATUS)?(this.gl.useProgram(this.shaderProgram),this.gl.bindAttribLocation(this.shaderProgram,0,"aVertexPosition"),this.pUniform=p("uPMatrix"),this.psUniform=p("pSize"),this.fcUniform=p("fillColor"),this.isBubbleUniform=p("isBubble"),this.bubbleSizeAbsUniform=p("bubbleSizeAbs"),this.bubbleSizeAreaUniform=p("bubbleSizeByArea"),this.uSamplerUniform=p("uSampler"),this.skipTranslationUniform=p("skipTranslation"),this.isCircleUniform=p("isCircle"),this.isInverted=p("isInverted"),!0):(this.errors.push(this.gl.getProgramInfoLog(this.shaderProgram)),this.handleErrors(),this.shaderProgram=!1,!1)):(this.shaderProgram=!1,this.handleErrors(),!1)}handleErrors(){this.errors.length&&a("[highcharts boost] shader error - "+this.errors.join(`
`))}stringToProgram(l,f){let p=this.gl.createShader(f==="vertex"?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);return this.gl.shaderSource(p,l),this.gl.compileShader(p),this.gl.getShaderParameter(p,this.gl.COMPILE_STATUS)?p:(this.errors.push("when compiling "+f+` shader:
`+this.gl.getShaderInfoLog(p)),!1)}destroy(){this.gl&&this.shaderProgram&&(this.gl.deleteProgram(this.shaderProgram),this.shaderProgram=!1)}fillColorUniform(){return this.fcUniform}getProgram(){return this.shaderProgram}pointSizeUniform(){return this.psUniform}perspectiveUniform(){return this.pUniform}reset(){this.gl&&this.shaderProgram&&(this.gl.uniform1i(this.isBubbleUniform,0),this.gl.uniform1i(this.isCircleUniform,0))}setBubbleUniforms(l,f,p,w=1){let T=l.options,u=Number.MAX_VALUE,g=-Number.MAX_VALUE;if(this.gl&&this.shaderProgram&&l.is("bubble")){let m=l.getPxExtremes();u=c(T.zMin,i(f,T.displayNegative===!1?T.zThreshold:-Number.MAX_VALUE,u)),g=c(T.zMax,Math.max(g,p)),this.gl.uniform1i(this.isBubbleUniform,1),this.gl.uniform1i(this.isCircleUniform,1),this.gl.uniform1i(this.bubbleSizeAreaUniform,l.options.sizeBy!=="width"),this.gl.uniform1i(this.bubbleSizeAbsUniform,l.options.sizeByAbsoluteValue),this.setUniform("bubbleMinSize",m.minPxSize*w),this.setUniform("bubbleMaxSize",m.maxPxSize*w),this.setUniform("bubbleZMin",u),this.setUniform("bubbleZMax",g),this.setUniform("bubbleZThreshold",l.options.zThreshold)}}setColor(l){this.gl&&this.shaderProgram&&this.gl.uniform4f(this.fcUniform,l[0]/255,l[1]/255,l[2]/255,l[3])}setDrawAsCircle(l){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.isCircleUniform,l?1:0)}setInverted(l){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.isInverted,l)}setPMatrix(l){this.gl&&this.shaderProgram&&this.gl.uniformMatrix4fv(this.pUniform,!1,l)}setPointSize(l){this.gl&&this.shaderProgram&&this.gl.uniform1f(this.psUniform,l)}setSkipTranslation(l){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.skipTranslationUniform,l===!0?1:0)}setTexture(l){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.uSamplerUniform,l)}setUniform(l,f){if(this.gl&&this.shaderProgram){let p=this.uLocations[l]=this.uLocations[l]||this.gl.getUniformLocation(this.shaderProgram,l);this.gl.uniform1f(p,f)}}}}),o(s,"Extensions/Boost/WGLVertexBuffer.js",[],function(){return class{constructor(r,i,a){this.buffer=!1,this.iterator=0,this.preAllocated=!1,this.vertAttribute=!1,this.components=a||2,this.dataComponents=a,this.gl=r,this.shader=i}allocate(r){this.iterator=-1,this.preAllocated=new Float32Array(4*r)}bind(){if(!this.buffer)return!1;this.gl.vertexAttribPointer(this.vertAttribute,this.components,this.gl.FLOAT,!1,0,0)}build(r,i,a){let c;return this.data=r||[],this.data&&this.data.length!==0||this.preAllocated?(this.components=a||this.components,this.buffer&&this.gl.deleteBuffer(this.buffer),this.preAllocated||(c=new Float32Array(this.data)),this.buffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.preAllocated||c,this.gl.STATIC_DRAW),this.vertAttribute=this.gl.getAttribLocation(this.shader.getProgram(),i),this.gl.enableVertexAttribArray(this.vertAttribute),c=!1,!0):(this.destroy(),!1)}destroy(){this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=!1,this.vertAttribute=!1),this.iterator=0,this.components=this.dataComponents||2,this.data=[]}push(r,i,a,c){this.preAllocated&&(this.preAllocated[++this.iterator]=r,this.preAllocated[++this.iterator]=i,this.preAllocated[++this.iterator]=a,this.preAllocated[++this.iterator]=c)}render(r,i,a){let c=this.preAllocated?this.preAllocated.length:this.data.length;return!!this.buffer&&!!c&&((!r||r>c||r<0)&&(r=0),(!i||i>c)&&(i=c),!(r>=i)&&(a=a||"POINTS",this.gl.drawArrays(this.gl[a],r/this.components,(i-r)/this.components),!0))}}}),o(s,"Extensions/Boost/WGLRenderer.js",[s["Core/Color/Color.js"],s["Core/Globals.js"],s["Core/Utilities.js"],s["Extensions/Boost/WGLDrawMode.js"],s["Extensions/Boost/WGLShader.js"],s["Extensions/Boost/WGLVertexBuffer.js"]],function(r,i,a,c,l,f){let{parse:p}=r,{doc:w,win:T}=i,{isNumber:u,isObject:g,merge:m,objectEach:v,pick:E}=a,D={column:!0,columnrange:!0,bar:!0,area:!0,areaspline:!0,arearange:!0},C={scatter:!0,bubble:!0},A=["webgl","experimental-webgl","moz-webgl","webkit-3d"];class P{static orthoMatrix(d,h){return[2/d,0,0,0,0,-(2/h),0,0,0,0,-2,0,-1,1,-1,1]}static seriesPointCount(d){let h,y,x;return d.boosted?(h=!!d.options.stacking,y=d.xData||d.options.xData||d.processedXData,x=(h?d.data:y||d.options.data).length,d.type==="treemap"?x*=12:d.type==="heatmap"?x*=6:D[d.type]&&(x*=2),x):0}constructor(d){this.data=[],this.height=0,this.isInited=!1,this.markerData=[],this.series=[],this.textureHandles={},this.width=0,this.postRenderCallback=d,this.settings={pointSize:1,lineWidth:1,fillColor:"#AA00AA",useAlpha:!0,usePreallocated:!1,useGPUTranslations:!1,debug:{timeRendering:!1,timeSeriesProcessing:!1,timeSetup:!1,timeBufferCopy:!1,timeKDTree:!1,showSkipSummary:!1}}}getPixelRatio(){return this.settings.pixelRatio||T.devicePixelRatio||1}setOptions(d){"pixelRatio"in d||(d.pixelRatio=1),m(!0,this.settings,d)}allocateBuffer(d){let h=this.vbuffer,y=0;this.settings.usePreallocated&&(d.series.forEach(x=>{x.boosted&&(y+=P.seriesPointCount(x))}),h&&h.allocate(y))}allocateBufferForSingleSeries(d){let h=this.vbuffer,y=0;this.settings.usePreallocated&&(d.boosted&&(y=P.seriesPointCount(d)),h&&h.allocate(y))}clear(){let d=this.gl;d&&d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}pushSeriesData(d,h){let y=this.data,x=this.settings,R=this.vbuffer,O=d.pointArrayMap&&d.pointArrayMap.join(",")==="low,high",{chart:k,options:z,sorted:I,xAxis:K,yAxis:G}=d,he=!!z.stacking,ee=z.data,We=d.xAxis.getExtremes(),ke=We.min-(d.xAxis.minPointOffset||0),Ue=We.max+(d.xAxis.minPointOffset||0),st=d.yAxis.getExtremes(),Oe=st.min-(d.yAxis.minPointOffset||0),me=st.max+(d.yAxis.minPointOffset||0),qe=d.xData||z.xData||d.processedXData,ze=d.yData||z.yData||d.processedYData,ye=d.zData||z.zData||d.processedZData,at=!qe||qe.length===0,lt=z.connectNulls,Ke=d.points||!1,S=he?d.data:qe||ee,_={x:Number.MAX_VALUE,y:0},L={x:-Number.MAX_VALUE,y:0},B=k.index===void 0,U=D[d.type],Y=z.zoneAxis||"y",N=z.zones||!1,V=z.threshold,M=this.getPixelRatio(),H=d.chart.plotWidth,J=!1,fe=!1,ae,Ee,Qe=0,Ge=!1,X,W,ne,Ye,Q=-1,Pe=!1,Ie=!1,De,Fe=!1,ve=!1,te=!1,Be=!1,Se=!0,je=!0,we,ge=!1,$e=!1,et=0;if(z.boostData&&z.boostData.length>0)return;z.gapSize&&($e=z.gapUnit!=="value"?z.gapSize*d.closestPointRange:z.gapSize),N&&(we=[],N.forEach((F,$)=>{if(F.color){let q=p(F.color).rgba;q[0]/=255,q[1]/=255,q[2]/=255,we[$]=q,ge||F.value!==void 0||(ge=q)}}),ge||(ge=p(d.pointAttribs&&d.pointAttribs().fill||d.color).rgba,ge[0]/=255,ge[1]/=255,ge[2]/=255)),k.inverted&&(H=d.chart.plotHeight),d.closestPointRangePx=Number.MAX_VALUE;let Z=F=>{F&&(h.colorData.push(F[0]),h.colorData.push(F[1]),h.colorData.push(F[2]),h.colorData.push(F[3]))},re=(F,$,q,le=1,ce)=>{Z(ce),M!==1&&(!x.useGPUTranslations||h.skipTranslation)&&(F*=M,$*=M,le*=M),x.usePreallocated&&R?(R.push(F,$,q?1:0,le),et+=4):(y.push(F),y.push($),y.push(q?M:0),y.push(le))},Ve=()=>{h.segments.length&&(h.segments[h.segments.length-1].to=y.length||et)},Ce=()=>{h.segments.length&&h.segments[h.segments.length-1].from===(y.length||et)||(Ve(),h.segments.push({from:y.length||et}))},oe=(F,$,q,le,ce)=>{Z(ce),re(F+q,$),Z(ce),re(F,$),Z(ce),re(F,$+le),Z(ce),re(F,$+le),Z(ce),re(F+q,$+le),Z(ce),re(F+q,$)};if(Ce(),Ke&&Ke.length>0){h.skipTranslation=!0,h.drawMode="TRIANGLES",Ke[0].node&&Ke[0].node.levelDynamic&&Ke.sort((F,$)=>{if(F.node){if(F.node.levelDynamic>$.node.levelDynamic)return 1;if(F.node.levelDynamic<$.node.levelDynamic)return-1}return 0}),Ke.forEach(F=>{let $,q,le=F.plotY;if(le!==void 0&&!isNaN(le)&&F.y!==null&&F.shapeArgs){let{x:ce=0,y:mt=0,width:gt=0,height:xt=0}=F.shapeArgs;$=(q=k.styledMode?F.series.colorAttribs(F):q=F.series.pointAttribs(F))["stroke-width"]||0,te=p(q.fill).rgba,te[0]/=255,te[1]/=255,te[2]/=255,d.is("treemap")&&($=$||1,Ee=p(q.stroke).rgba,Ee[0]/=255,Ee[1]/=255,Ee[2]/=255,oe(ce,mt,gt,xt,Ee),$/=2),d.is("heatmap")&&k.inverted&&(ce=K.len-ce,mt=G.len-mt,gt=-gt,xt=-xt),oe(ce+$,mt+$,gt-2*$,xt-2*$,te)}}),Ve();return}for(;Q<S.length-1;){if((ne=S[++Q])===void 0)continue;if(B)break;let F=ee&&ee[Q];if(!at&&g(F,!0)&&F.color&&(te=p(F.color).rgba,te[0]/=255,te[1]/=255,te[2]/=255),at?(X=ne[0],W=ne[1],S[Q+1]&&(Ie=S[Q+1][0]),S[Q-1]&&(Pe=S[Q-1][0]),ne.length>=3&&(Ye=ne[2],ne[2]>h.zMax&&(h.zMax=ne[2]),ne[2]<h.zMin&&(h.zMin=ne[2]))):(X=ne,W=ze[Q],S[Q+1]&&(Ie=S[Q+1]),S[Q-1]&&(Pe=S[Q-1]),ye&&ye.length&&(Ye=ye[Q],ye[Q]>h.zMax&&(h.zMax=ye[Q]),ye[Q]<h.zMin&&(h.zMin=ye[Q]))),!lt&&(X===null||W===null)){Ce();continue}if(Ie&&Ie>=ke&&Ie<=Ue&&(Fe=!0),Pe&&Pe>=ke&&Pe<=Ue&&(ve=!0),O?(at&&(W=ne.slice(1,3)),De=W[0],W=W[1]):he&&(X=ne.x,De=(W=ne.stackY)-ne.y),Oe!=null&&me!=null&&(Se=W>=Oe&&W<=me),X>Ue&&L.x<Ue&&(L.x=X,L.y=W),X<ke&&_.x>ke&&(_.x=X,_.y=W),W!==null||!lt){if(W===null||!Se&&!Fe&&!ve){Ce();continue}if(I&&(Ie>=ke||X>=ke)&&(Pe<=Ue||X<=Ue)&&(Be=!0),Be||Fe||ve){if($e&&X-Pe>$e&&Ce(),N){let $;N.some((q,le)=>{let ce=N[le-1];return Y==="x"?q.value!==void 0&&X<=q.value&&(we[le]&&(!ce||X>=ce.value)&&($=we[le]),!0):q.value!==void 0&&W<=q.value&&(we[le]&&(!ce||W>=ce.value)&&($=we[le]),!0)}),te=$||ge||te}if(x.useGPUTranslations||(h.skipTranslation=!0,X=K.toPixels(X,!0),W=G.toPixels(W,!0),!(X>H)||h.drawMode!=="POINTS")){if(h.hasMarkers&&Be&&J!==!1&&(d.closestPointRangePx=Math.min(d.closestPointRangePx,Math.abs(X-J))),!x.useGPUTranslations&&!x.usePreallocated&&J&&1>Math.abs(X-J)&&fe&&1>Math.abs(W-fe)){x.debug.showSkipSummary&&++Qe;continue}U&&(ae=De,(De===!1||De===void 0)&&(ae=W<0?W:0),(O||he)&&!G.logarithmic||(ae=Math.max(V===null?Oe:V,Oe)),x.useGPUTranslations||(ae=G.toPixels(ae,!0)),re(X,ae,0,0,te)),z.step&&!je&&re(X,fe,0,2,te),re(X,W,0,d.type==="bubble"?Ye||1:2,te),J=X,fe=W,Ge=!0,je=!1}}}}x.debug.showSkipSummary&&console.log("skipped points:",Qe);let _e=(F,$)=>{if(x.useGPUTranslations||(h.skipTranslation=!0,F.x=K.toPixels(F.x,!0),F.y=G.toPixels(F.y,!0)),$){this.data=[F.x,F.y,0,2].concat(this.data);return}re(F.x,F.y,0,2)};!Ge&&lt!==!1&&d.drawMode==="line_strip"&&(_.x<Number.MAX_VALUE&&_e(_,!0),L.x>-Number.MAX_VALUE&&_e(L)),Ve()}pushSeries(d){let h=this.markerData,y=this.series,x=this.settings;y.length>0&&y[y.length-1].hasMarkers&&(y[y.length-1].markerTo=h.length),x.debug.timeSeriesProcessing&&console.time("building "+d.type+" series");let R={segments:[],markerFrom:h.length,colorData:[],series:d,zMin:Number.MAX_VALUE,zMax:-Number.MAX_VALUE,hasMarkers:!!d.options.marker&&d.options.marker.enabled!==!1,showMarkers:!0,drawMode:c[d.type]||"LINE_STRIP"};d.index>=y.length?y.push(R):y[d.index]=R,this.pushSeriesData(d,R),x.debug.timeSeriesProcessing&&console.timeEnd("building "+d.type+" series")}flush(){let d=this.vbuffer;this.data=[],this.markerData=[],this.series=[],d&&d.destroy()}setXAxis(d){let h=this.shader;if(!h)return;let y=this.getPixelRatio();h.setUniform("xAxisTrans",d.transA*y),h.setUniform("xAxisMin",d.min),h.setUniform("xAxisMinPad",d.minPixelPadding*y),h.setUniform("xAxisPointRange",d.pointRange),h.setUniform("xAxisLen",d.len*y),h.setUniform("xAxisPos",d.pos*y),h.setUniform("xAxisCVSCoord",!d.horiz),h.setUniform("xAxisIsLog",!!d.logarithmic),h.setUniform("xAxisReversed",!!d.reversed)}setYAxis(d){let h=this.shader;if(!h)return;let y=this.getPixelRatio();h.setUniform("yAxisTrans",d.transA*y),h.setUniform("yAxisMin",d.min),h.setUniform("yAxisMinPad",d.minPixelPadding*y),h.setUniform("yAxisPointRange",d.pointRange),h.setUniform("yAxisLen",d.len*y),h.setUniform("yAxisPos",d.pos*y),h.setUniform("yAxisCVSCoord",!d.horiz),h.setUniform("yAxisIsLog",!!d.logarithmic),h.setUniform("yAxisReversed",!!d.reversed)}setThreshold(d,h){let y=this.shader;y&&(y.setUniform("hasThreshold",d),y.setUniform("translatedThreshold",h))}renderChart(d){let h=this.gl,y=this.settings,x=this.shader,R=this.vbuffer,O=this.getPixelRatio();if(!d)return!1;this.width=d.chartWidth*O,this.height=d.chartHeight*O;let k=this.height,z=this.width;if(!h||!x||!z||!k)return!1;y.debug.timeRendering&&console.time("gl rendering"),h.canvas.width=z,h.canvas.height=k,x.bind(),h.viewport(0,0,z,k),x.setPMatrix(P.orthoMatrix(z,k)),y.lineWidth>1&&!i.isMS&&h.lineWidth(y.lineWidth),R&&(R.build(this.data,"aVertexPosition",4),R.bind()),x.setInverted(d.inverted),this.series.forEach((I,K)=>{let G=I.series.options,he=G.marker,ee=G.lineWidth!==void 0?G.lineWidth:1,We=G.threshold,ke=u(We),Ue=I.series.yAxis.getThreshold(We),st=E(G.marker?G.marker.enabled:null,!!I.series.xAxis.isRadial||null,I.series.closestPointRangePx>2*((G.marker?G.marker.radius:10)||10)),Oe=this.textureHandles[he&&he.symbol||I.series.symbol]||this.textureHandles.circle,me,qe,ze,ye=[];if(I.segments.length!==0&&I.segments[0].from!==I.segments[0].to&&(Oe.isReady&&(h.bindTexture(h.TEXTURE_2D,Oe.handle),x.setTexture(Oe.handle)),d.styledMode?ze=I.series.markerGroup&&I.series.markerGroup.getStyle("fill"):(ze=I.drawMode==="POINTS"&&I.series.pointAttribs&&I.series.pointAttribs().fill||I.series.color,G.colorByPoint&&(ze=I.series.chart.options.colors[K])),I.series.fillOpacity&&G.fillOpacity&&(ze=new r(ze).setOpacity(E(G.fillOpacity,1)).get()),ye=p(ze).rgba,y.useAlpha||(ye[3]=1),I.drawMode==="LINES"&&y.useAlpha&&ye[3]<1&&(ye[3]/=10),G.boostBlending==="add"?(h.blendFunc(h.SRC_ALPHA,h.ONE),h.blendEquation(h.FUNC_ADD)):G.boostBlending==="mult"||G.boostBlending==="multiply"?h.blendFunc(h.DST_COLOR,h.ZERO):G.boostBlending==="darken"?(h.blendFunc(h.ONE,h.ONE),h.blendEquation(h.FUNC_MIN)):h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),x.reset(),I.colorData.length>0?(x.setUniform("hasColor",1),(qe=new f(h,x)).build(Array(I.segments[0].from).concat(I.colorData),"aColor",4),qe.bind()):(x.setUniform("hasColor",0),h.disableVertexAttribArray(h.getAttribLocation(x.getProgram(),"aColor"))),x.setColor(ye),this.setXAxis(I.series.xAxis),this.setYAxis(I.series.yAxis),this.setThreshold(ke,Ue),I.drawMode==="POINTS"&&x.setPointSize(2*E(G.marker&&G.marker.radius,.5)*O),x.setSkipTranslation(I.skipTranslation),I.series.type==="bubble"&&x.setBubbleUniforms(I.series,I.zMin,I.zMax,O),x.setDrawAsCircle(C[I.series.type]||!1),R)){if(ee>0||I.drawMode!=="LINE_STRIP")for(me=0;me<I.segments.length;me++)R.render(I.segments[me].from,I.segments[me].to,I.drawMode);if(I.hasMarkers&&st)for(x.setPointSize(2*E(G.marker&&G.marker.radius,5)*O),x.setDrawAsCircle(!0),me=0;me<I.segments.length;me++)R.render(I.segments[me].from,I.segments[me].to,"POINTS")}}),y.debug.timeRendering&&console.timeEnd("gl rendering"),this.postRenderCallback&&this.postRenderCallback(this),this.flush()}render(d){if(this.clear(),d.renderer.forExport)return this.renderChart(d);this.isInited?this.renderChart(d):setTimeout(()=>{this.render(d)},1)}setSize(d,h){let y=this.shader;y&&(this.width!==d||this.height!==h)&&(this.width=d,this.height=h,y.bind(),y.setPMatrix(P.orthoMatrix(d,h)))}init(d,h){let y=this.settings;if(this.isInited=!1,!d)return!1;y.debug.timeSetup&&console.time("gl setup");for(let k=0;k<A.length&&(this.gl=d.getContext(A[k],{}),!this.gl);++k);let x=this.gl;if(!x)return!1;h||this.flush(),x.enable(x.BLEND),x.blendFunc(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA),x.disable(x.DEPTH_TEST),x.depthFunc(x.LESS);let R=this.shader=new l(x);if(!R)return!1;this.vbuffer=new f(x,R);let O=(k,z)=>{let I={isReady:!1,texture:w.createElement("canvas"),handle:x.createTexture()},K=I.texture.getContext("2d");this.textureHandles[k]=I,I.texture.width=512,I.texture.height=512,K.mozImageSmoothingEnabled=!1,K.webkitImageSmoothingEnabled=!1,K.msImageSmoothingEnabled=!1,K.imageSmoothingEnabled=!1,K.strokeStyle="rgba(255, 255, 255, 0)",K.fillStyle="#FFF",z(K);try{x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,I.handle),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,I.texture),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.bindTexture(x.TEXTURE_2D,null),I.isReady=!0}catch{}};return O("circle",k=>{k.beginPath(),k.arc(256,256,256,0,2*Math.PI),k.stroke(),k.fill()}),O("square",k=>{k.fillRect(0,0,512,512)}),O("diamond",k=>{k.beginPath(),k.moveTo(256,0),k.lineTo(512,256),k.lineTo(256,512),k.lineTo(0,256),k.lineTo(256,0),k.fill()}),O("triangle",k=>{k.beginPath(),k.moveTo(0,512),k.lineTo(256,0),k.lineTo(512,512),k.lineTo(0,512),k.fill()}),O("triangle-down",k=>{k.beginPath(),k.moveTo(0,0),k.lineTo(256,512),k.lineTo(512,0),k.lineTo(0,0),k.fill()}),this.isInited=!0,y.debug.timeSetup&&console.timeEnd("gl setup"),!0}destroy(){let d=this.gl,h=this.shader,y=this.vbuffer;this.flush(),y&&y.destroy(),h&&h.destroy(),d&&(v(this.textureHandles,x=>{x.handle&&d.deleteTexture(x.handle)}),d.canvas.width=1,d.canvas.height=1)}}return P}),o(s,"Extensions/Boost/BoostSeries.js",[s["Extensions/Boost/BoostableMap.js"],s["Extensions/Boost/Boostables.js"],s["Extensions/Boost/BoostChart.js"],s["Core/Defaults.js"],s["Core/Globals.js"],s["Core/Utilities.js"],s["Extensions/Boost/WGLRenderer.js"]],function(r,i,a,c,l,f,p){let w,T,{getBoostClipRect:u,isChartSeriesBoosting:g}=a,{getOptions:m}=c,{composed:v,doc:E,noop:D,win:C}=l,{addEvent:A,destroyObjectProperties:P,error:j,extend:d,fireEvent:h,isArray:y,isNumber:x,pick:R,pushUnique:O,wrap:k,defined:z}=f;function I(S,_){let L=_.boost;S&&L&&L.target&&L.canvas&&!g(_.chart)&&S.allocateBufferForSingleSeries(_)}function K(S){return R(S&&S.options&&S.options.boost&&S.options.boost.enabled,!0)}function G(S,_){let L=S.constructor,B=S.seriesGroup||_.group,U=S.chartWidth,Y=S.chartHeight,N=S,V=typeof SVGForeignObjectElement<"u",M=(N=g(S)?S:_).boost=N.boost||{};if(V=!1,T||(T=E.createElement("canvas")),!M.target&&(M.canvas=T,S.renderer.forExport||!V?(N.renderTarget=M.target=S.renderer.image("",0,0,U,Y).addClass("highcharts-boost-canvas").add(B),M.clear=function(){M.target.attr({href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="})},M.copy=function(){M.resize(),M.target.attr({href:M.canvas.toDataURL("image/png")})}):(M.targetFo=S.renderer.createElement("foreignObject").add(B),N.renderTarget=M.target=E.createElement("canvas"),M.targetCtx=M.target.getContext("2d"),M.targetFo.element.appendChild(M.target),M.clear=function(){M.target.width=M.canvas.width,M.target.height=M.canvas.height},M.copy=function(){M.target.width=M.canvas.width,M.target.height=M.canvas.height,M.targetCtx.drawImage(M.canvas,0,0)}),M.resize=function(){U=S.chartWidth,Y=S.chartHeight,(M.targetFo||M.target).attr({x:0,y:0,width:U,height:Y}).css({pointerEvents:"none",mixedBlendMode:"normal",opacity:1}),N instanceof L&&N.boost.markerGroup.translate(S.plotLeft,S.plotTop)},M.clipRect=S.renderer.clipRect(),(M.targetFo||M.target).attr({zIndex:_.options.zIndex}),N instanceof L&&(N.boost.markerGroup=N.renderer.g().add(B).translate(_.xAxis.pos,_.yAxis.pos))),M.canvas.width=U,M.canvas.height=Y,M.clipRect){let H=u(S,N),J=H.width===S.clipBox.width&&H.height===S.clipBox.height?B:M.targetFo||M.target;M.clipRect.attr(H),J==null||J.clip(M.clipRect)}return M.resize(),M.clear(),!M.wgl&&(M.wgl=new p(H=>{H.settings.debug.timeBufferCopy&&console.time("buffer copy"),M.copy(),H.settings.debug.timeBufferCopy&&console.timeEnd("buffer copy")}),M.wgl.init(M.canvas)||j("[highcharts boost] - unable to init WebGL renderer"),M.wgl.setOptions(S.options.boost||{}),N instanceof L&&M.wgl.allocateBuffer(S)),M.wgl.setSize(U,Y),M.wgl}function he(S){let _=S.points;if(_){let L,B;for(B=0;B<_.length;B+=1)(L=_[B])&&L.destroyElements&&L.destroyElements()}for(let L of(["graph","area","tracker"].forEach(B=>{let U=S[B];U&&(S[B]=U.destroy())}),S.zones))P(L,void 0,!0)}function ee(S,_,L,B,U,Y){let N=(U=U||0)+(B=B||3e3),V=!0;for(;V&&U<N&&U<S.length;)V=_(S[U],U),++U;V&&(U<S.length?Y?ee(S,_,L,B,U,Y):C.requestAnimationFrame?C.requestAnimationFrame(function(){ee(S,_,L,B,U)}):setTimeout(ee,0,S,_,L,B,U):L&&L())}function We(S,_){let L=S.options,B=L.data,U=S.xAxis&&S.xAxis.options,Y=S.yAxis&&S.yAxis.options,N=S.colorAxis&&S.colorAxis.options;return B.length>(L.boostThreshold||Number.MAX_VALUE)&&x(Y.min)&&x(Y.max)&&(!_||x(U.min)&&x(U.max))&&(!N||x(N.min)&&x(N.max))}let ke=(S,_)=>!S.forceCrop&&(g(S.chart)||(_?_.length:0)>=(S.options.boostThreshold||Number.MAX_VALUE));function Ue(){let S=this,_=S.chart;_.boost&&_.boost.markerGroup===S.markerGroup&&(S.markerGroup=null),_.hoverPoints&&(_.hoverPoints=_.hoverPoints.filter(function(L){return L.series===S})),_.hoverPoint&&_.hoverPoint.series===S&&(_.hoverPoint=null)}function st(){let S=this.boost;S&&S.canvas&&S.target&&(S.wgl&&S.wgl.clear(),S.clear&&S.clear())}function Oe(S){let _=S.boost;_&&_.canvas&&_.target&&_.wgl&&!g(S.chart)&&_.wgl.render(S.chart)}function me(S,_){let L=S.options,B=S.xAxis,U=S.pointClass;if(_ instanceof U)return _;let Y=S.xData||L.xData||S.processedXData||!1,N=new U(S,(S.options.data||[])[_.i],Y?Y[_.i]:void 0);return N.category=R(B.categories?B.categories[N.x]:N.x,N.x),N.dist=_.dist,N.distX=_.distX,N.plotX=_.plotX,N.plotY=_.plotY,N.index=_.i,N.percentage=_.percentage,N.isInside=S.isPointInside(N),N}function qe(S){var _,L,B,U;let{options:Y,xAxis:N,yAxis:V}=this;if(!this.isDirty&&!N.isDirty&&!V.isDirty&&!S)return!1;this.yAxis.setTickInterval();let M=Y.boostThreshold||0,H=Y.cropThreshold,J=Y.data||this.data,fe=this.xData,ae=N.getExtremes(),Ee=ae.max??Number.MAX_VALUE,Qe=ae.min??-Number.MAX_VALUE,Ge=this.yData,X=V.getExtremes(),W=X.max??Number.MAX_VALUE,ne=X.min??-Number.MAX_VALUE;if(!this.boosted&&N.old&&V.old&&Qe>=(N.old.min??-Number.MAX_VALUE)&&Ee<=(N.old.max??Number.MAX_VALUE)&&ne>=(V.old.min??-Number.MAX_VALUE)&&W<=(V.old.max??Number.MAX_VALUE))return this.processedXData??(this.processedXData=fe),this.processedYData??(this.processedYData=Ge),!0;if(!M||J.length<M||H&&!this.forceCrop&&!this.getExtremesFromAll&&!Y.getExtremesFromAll&&J.length<H)return this.processedXData=fe,this.processedYData=Ge,!0;let Ye=[],Q=[],Pe=[],Ie=!(x(ae.max)||x(ae.min)),De=!(x(X.max)||x(X.min)),Fe=!1,ve,te=fe[0],Be=fe[0],Se,je=Ge[0],we=Ge[0];for(let ge=0,$e=fe.length;ge<$e;++ge)ve=fe[ge],Se=Ge[ge],ve>=Qe&&ve<=Ee&&Se>=ne&&Se<=W?(Ye.push({x:ve,y:Se}),Q.push(ve),Pe.push(Se),Ie&&(te=Math.max(te,ve),Be=Math.min(Be,ve)),De&&(je=Math.max(je,Se),we=Math.min(we,Se))):Fe=!0;return Ie&&((_=N.options).max??(_.max=te),(L=N.options).min??(L.min=Be)),De&&((B=V.options).max??(B.max=je),(U=V.options).min??(U.min=we)),this.cropped=Fe,this.cropStart=0,this.processedXData=Q,this.processedYData=Pe,ke(this,Q)||(this.processedData=Ye),!0}function ze(){let S=this.options||{},_=this.chart,L=this.xAxis,B=this.yAxis,U=S.xData||this.processedXData,Y=S.yData||this.processedYData,N=this.processedData||S.data,V=L.getExtremes(),M=V.min-(L.minPointOffset||0),H=V.max+(L.minPointOffset||0),J=B.getExtremes(),fe=J.min-(B.minPointOffset||0),ae=J.max+(B.minPointOffset||0),Ee={},Qe=!!this.sampling,Ge=S.enableMouseTracking,X=S.threshold,W=this.pointArrayMap&&this.pointArrayMap.join(",")==="low,high",ne=!!S.stacking,Ye=this.cropStart||0,Q=this.requireSorting,Pe=!U,Ie=S.findNearestPointBy==="x",De=this.xData||this.options.xData||this.processedXData||!1,Fe=!1,ve,te=B.getThreshold(X),Be,Se,je,we;if(L.isPanning||B.isPanning||(Fe=G(_,this),_.boosted=!0,!this.visible))return;(this.points||this.graph)&&he(this),g(_)?(this.markerGroup&&this.markerGroup!==_.boost.markerGroup&&this.markerGroup.destroy(),this.markerGroup=_.boost.markerGroup,this.boost&&this.boost.target&&(this.renderTarget=this.boost.target=this.boost.target.destroy())):(_.boost&&this.markerGroup===_.boost.markerGroup&&(this.markerGroup=void 0),this.markerGroup=this.plotGroup("markerGroup","markers",!0,1,_.seriesGroup));let ge=this.points=[],$e=(Z,re,Ve,Ce)=>{let oe=!!De&&De[Ye+Ve],_e=F=>{_.inverted&&(F=L.len-F,re=B.len-re),ge.push({destroy:D,x:oe,clientX:F,plotX:F,plotY:re,i:Ye+Ve,percentage:Ce})};Z=Math.ceil(Z),w=Ie?Z:Z+","+re,Ge&&(Ee[w]?oe===De[De.length-1]&&(ge.length--,_e(Z)):(Ee[w]=!0,_e(Z)))};this.buildKDTree=D,h(this,"renderCanvas"),Fe&&(I(Fe,this),Fe.pushSeries(this),Oe(this));let et=Fe.settings;_.renderer.forExport||(et.debug.timeKDTree&&console.time("kd tree building"),ee(ne?this.data.slice(Ye):U||N,function(Z,re){let Ve=_.index===void 0,Ce,oe,_e,F,$,q=!1,le=!0;return!z(Z)||(!Ve&&(Pe?(Ce=Z[0],oe=Z[1]):(Ce=Z,oe=Y[re]),W?(Pe&&(oe=Z.slice(1,3)),q=oe[0],oe=oe[1]):ne&&(Ce=Z.x,q=(oe=Z.stackY)-Z.y,$=Z.percentage),Q||(le=(oe||0)>=fe&&oe<=ae),oe!==null&&Ce>=M&&Ce<=H&&le&&(_e=L.toPixels(Ce,!0),Qe?((je===void 0||_e===ve)&&(W||(q=oe),(we===void 0||oe>Se)&&(Se=oe,we=re),(je===void 0||q<Be)&&(Be=q,je=re)),Ie&&_e===ve||(je!==void 0&&(F=B.toPixels(Se,!0),te=B.toPixels(Be,!0),$e(_e,F,we,$),te!==F&&$e(_e,te,je,$)),je=we=void 0,ve=_e)):$e(_e,F=Math.ceil(B.toPixels(oe,!0)),re,$))),!Ve)},()=>{h(this,"renderedCanvas"),delete this.buildKDTree,this.options&&this.buildKDTree(),et.debug.timeKDTree&&console.timeEnd("kd tree building")}))}function ye(S){let _=!0;if(this.chart.options&&this.chart.options.boost&&(_=this.chart.options.boost.enabled===void 0||this.chart.options.boost.enabled),!_||!this.boosted)return S.call(this);this.chart.boosted=!0;let L=G(this.chart,this);L&&(I(L,this),L.pushSeries(this)),Oe(this)}function at(S){if(this.boosted){if(We(this))return{};if(this.xAxis.isPanning||this.yAxis.isPanning)return this}return S.apply(this,[].slice.call(arguments,1))}function lt(S){var L,B;let _=this.options.data;if(K(this.chart)&&r[this.type]){let U=this.is("scatter")&&!this.is("bubble");if(!ke(this,_)||U||this.options.stacking||!We(this,!0)){if(this.boosted&&((L=this.xAxis)!=null&&L.isPanning||(B=this.yAxis)!=null&&B.isPanning))return;U&&!this.yAxis.treeGrid?qe.call(this,arguments[1]):S.apply(this,[].slice.call(arguments,1)),_=this.processedXData}if(this.boosted=ke(this,_),this.boosted){let Y;this.options.data&&this.options.data.length&&!x(Y=this.getFirstValidPoint(this.options.data))&&!y(Y)&&j(12,!1,this.chart),function(N){var M;N.boost=N.boost||{getPoint:H=>me(N,H)};let V=N.boost.altered=[];if(["allowDG","directTouch","stickyTracking"].forEach(H=>{V.push({prop:H,val:N[H],own:Object.hasOwnProperty.call(N,H)})}),N.allowDG=!1,N.directTouch=!1,N.stickyTracking=!0,N.finishedAnimating=!0,N.labelBySeries&&(N.labelBySeries=N.labelBySeries.destroy()),N.is("scatter")&&N.data.length){for(let H of N.data)(M=H==null?void 0:H.destroy)==null||M.call(H);N.data.length=0,N.points.length=0,delete N.processedData}}(this)}else(function(Y){let N=Y.boost;N&&((N.altered||[]).forEach(V=>{V.own?Y[V.prop]=V.val:delete Y[V.prop]}),N.clear&&N.clear())})(this)}else S.apply(this,[].slice.call(arguments,1))}function Ke(S){let _=S.apply(this,[].slice.call(arguments,1));return this.boost&&_?this.boost.getPoint(_):_}return{compose:function(S,_,L){if(O(v,"Boost.Series")){let B=m().plotOptions,U=S.prototype;if(A(S,"destroy",Ue),A(S,"hide",st),L&&(U.renderCanvas=ze),k(U,"getExtremes",at),k(U,"processData",lt),k(U,"searchPoint",Ke),["translate","generatePoints","drawTracker","drawPoints","render"].forEach(Y=>function(N,V,M){function H(J){let fe=this.options.stacking&&(M==="translate"||M==="generatePoints");this.boosted&&!fe&&K(this.chart)&&this.type!=="heatmap"&&this.type!=="treemap"&&r[this.type]&&this.options.boostThreshold!==0?M==="render"&&this.renderCanvas&&this.renderCanvas():J.call(this)}if(k(N,M,H),M==="translate")for(let J of["column","arearange","columnrange","heatmap","treemap"])V[J]&&k(V[J].prototype,M,H)}(U,_,Y)),i.forEach(Y=>{let N=B[Y];N&&(N.boostThreshold=5e3,N.boostData=[],_[Y].prototype.fillOpacity=!0)}),L){let{area:Y,areaspline:N,bubble:V,column:M,heatmap:H,scatter:J,treemap:fe}=_;if(Y&&d(Y.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),N&&d(N.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),V){let ae=V.prototype;delete ae.buildKDTree,k(ae,"markerAttribs",function(Ee){return!this.boosted&&Ee.apply(this,[].slice.call(arguments,1))})}M&&d(M.prototype,{fill:!0,sampling:!0}),J&&(J.prototype.fill=!0),[H,fe].forEach(ae=>{ae&&k(ae.prototype,"drawPoints",ye)})}}return S},destroyGraphics:he,eachAsync:ee,getPoint:me}}),o(s,"Extensions/Boost/NamedColors.js",[],function(){return{defaultHTMLColorMap:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}}),o(s,"Extensions/Boost/Boost.js",[s["Extensions/Boost/BoostChart.js"],s["Extensions/Boost/BoostSeries.js"],s["Core/Globals.js"],s["Extensions/Boost/NamedColors.js"],s["Core/Utilities.js"]],function(r,i,a,c,l){let{doc:f,win:p}=a,{addEvent:w,error:T}=l,u=["webgl","experimental-webgl","moz-webgl","webkit-3d"];function g(){let m;if(p.WebGLRenderingContext!==void 0){m=f.createElement("canvas");for(let v=0;v<u.length;++v)try{if(m.getContext(u[v])!=null)return!0}catch{}}return!1}return{compose:function(m,v,E,D,C){let A=g();A||(a.initCanvasBoost!==void 0?a.initCanvasBoost():T(26)),C&&!C.names.lightgoldenrodyellow&&(C.names={...C.names,...c.defaultHTMLColorMap}),r.compose(m,A),i.compose(E,D,A),w(v,"setExtremes",function(P){for(let j of[this.chart,...this.series].map(d=>d.renderTarget).filter(Boolean)){let{horiz:d,pos:h}=this,y=d?"scaleX":"scaleY",x=d?"translateX":"translateY",R=(j==null?void 0:j[y])??1,O=1,k=0,z=1,I="none";this.isPanning&&(O=(P.scale??1)*R,k=((j==null?void 0:j[x])||0)-O*(P.move||0)+R*h-O*h,z=.7,I="blur(3px)"),j==null||j.attr({[y]:O,[x]:k}).css({transition:"250ms filter, 250ms opacity",filter:I,opacity:z})}})},hasWebGLSupport:g}}),o(s,"masters/modules/boost.src.js",[s["Core/Globals.js"],s["Extensions/Boost/Boost.js"]],function(r,i){return r.hasWebGLSupport=i.hasWebGLSupport,i.compose(r.Chart,r.Axis,r.Series,r.seriesTypes,r.Color),r})})})($s);var Jn=$s.exports;const Qn=Xt(Jn);var Vs={exports:{}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){var s=t?t._modules:{};function o(r,i,a,c){r.hasOwnProperty(i)||(r[i]=c.apply(null,a),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:r[i]}})))}o(s,"Extensions/NoDataToDisplay/NoDataDefaults.js",[],function(){return{lang:{noData:"No data to display"},noData:{attr:{zIndex:1},position:{x:0,y:0,align:"center",verticalAlign:"middle"},style:{fontWeight:"bold",fontSize:"0.8em",color:"#666666"}}}}),o(s,"Extensions/NoDataToDisplay/NoDataToDisplay.js",[s["Core/Renderer/HTML/AST.js"],s["Extensions/NoDataToDisplay/NoDataDefaults.js"],s["Core/Utilities.js"]],function(r,i,a){let{addEvent:c,extend:l,merge:f}=a;function p(){let g=this.series||[],m=g.length;for(;m--;)if(g[m].hasData()&&!g[m].options.isInternal)return!0;return this.loadingShown}function w(){this.noDataLabel&&(this.noDataLabel=this.noDataLabel.destroy())}function T(g){let m=this.options,v=g||m&&m.lang.noData||"",E=m&&(m.noData||{});this.renderer&&(this.noDataLabel||(this.noDataLabel=this.renderer.label(v,0,0,void 0,void 0,void 0,E.useHTML,void 0,"no-data").add()),this.styledMode||this.noDataLabel.attr(r.filterUserAttributes(E.attr||{})).css(E.style||{}),this.noDataLabel.align(l(this.noDataLabel.getBBox(),E.position||{}),!1,"plotBox"))}function u(){this.hasData()?this.hideNoData():this.showNoData()}return{compose:function(g,m){let v=g.prototype;v.showNoData||(v.hasData=p,v.hideNoData=w,v.showNoData=T,c(g,"render",u),f(!0,m,i))}}}),o(s,"masters/modules/no-data-to-display.src.js",[s["Core/Globals.js"],s["Extensions/NoDataToDisplay/NoDataToDisplay.js"]],function(r,i){return i.compose(r.Chart,r.defaultOptions),r})})})(Vs);var er=Vs.exports;const tr=Xt(er);Qn(Re);Yn(Re);tr(Re);const sr={"carrot-orange":"#102433",inchworm:"#201f1e"},ds=localStorage.getItem("theme")||"blue-pink-gradient";Re.theme={chart:{backgroundColor:ds?sr[ds]:"#282a36"},tooltip:{style:{fontSize:"15px"}}};Re.setOptions(Re.theme);Re.setOptions({colors:(Re.getOptions().colors||[]).map(e=>({radialGradient:{cx:.5,cy:.3,r:.7},stops:[[0,e],[1,Re.color(e).brighten(-.25).get("rgb")]]}))??[]});Re.setOptions({plotOptions:{series:{animation:!1,boostThreshold:4e3}}});const nr=()=>{const e=ie.lazy(()=>Ne(()=>import("./AllTimeSpendings-D15hDN9-.js"),__vite__mapDeps([0,1,2,3]))),t=ie.lazy(()=>Ne(()=>import("./MonthlyAverage-CykAOrI2.js"),__vite__mapDeps([4,1,5,2,3]))),s=ie.lazy(()=>Ne(()=>import("./SavingsHistory-ctnm5fjI.js"),__vite__mapDeps([6,1,2,3]))),o=ie.lazy(()=>Ne(()=>import("./DailyAverage-Cs0xuoqT.js"),__vite__mapDeps([7,1,5,2,3]))),r=ie.lazy(()=>Ne(()=>import("./DailyAverageTrend-C5GDBvYQ.js"),__vite__mapDeps([8,1,2,3]))),i=ie.lazy(()=>Ne(()=>import("./MonthlyAverageTrend-_LSrPi6_.js"),__vite__mapDeps([9,1,2,3]))),a=ie.lazy(()=>Ne(()=>import("./LastTwoMonthsAverage-DY_LVoSk.js"),__vite__mapDeps([10,1,2,3])));ie.lazy(()=>Ne(()=>import("./WealthVelocity-BQae951R.js"),__vite__mapDeps([11,1,2,3])));const{data:c,dataDispatch:l}=pe(),f=c.groupedData===null,p=Object.keys(c.raw).length===0,{token:w}=xe(),T=c.loading,u=Xe();return b.useEffect(()=>{f&&w&&Le(w,l,u)},[f,w]),n.jsxs("div",{children:[n.jsx("h2",{children:"Charts page"}),!T&&!p&&n.jsx(Zn,{}),n.jsx(Ys,{}),T?n.jsxs("div",{className:"lds-ripple",children:[n.jsx("div",{}),n.jsx("div",{})]}):!p&&n.jsxs("div",{className:"charts-page",children:[n.jsx("div",{className:"charts-section",children:n.jsx(qn,{})}),n.jsx("div",{className:"charts-section",children:n.jsx(Kn,{})}),n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(e,{})})}),n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(t,{})})}),n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(i,{})})}),n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(s,{})})}),n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(o,{})})}),n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(r,{})})}),n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(a,{})})})]})]})};function Pt({show:e,onClose:t,children:s}){const o=b.useRef(null);return b.useEffect(()=>{const r=i=>{e&&o.current&&!o.current.contains(i.target)&&t(i)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[e,t]),b.useEffect(()=>{const r=i=>{e&&i.key==="Escape"&&t({preventDefault:()=>{}})};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[e,t]),n.jsx(n.Fragment,{children:e?n.jsx("div",{className:"modal-window",children:n.jsxs("div",{ref:o,children:[n.jsx("a",{href:"/",onClick:t,title:"Close",className:"modal-close",children:"Close"}),s]})}):""})}class Me extends Error{constructor(t="Authentication failed"){super(t),this.name="AuthenticationError"}}const Hs="https://dev-expenses-api.pantheonsite.io",rr=5;let Lt=Promise.resolve(),vt=null,Ot=null;const or=()=>new Promise(e=>{setTimeout(e,0)}),Dt=e=>{if(e!=null){if(typeof e=="number")return e>1e12?e:e*1e3;if(typeof e=="string"){const t=e.trim();if(!t)return;const s=Number(t);if(!Number.isNaN(s))return s>1e12?s:s*1e3;const o=Date.parse(t);if(!Number.isNaN(o))return o}}};function jt(e){var w,T,u,g,m,v,E,D,C,A,P,j,d,h,y,x,R,O,k,z,I,K,G,he;const t=((w=e.id!==void 0?e.id:void 0)==null?void 0:w.toString())||((g=(u=(T=e.nid)==null?void 0:T[0])==null?void 0:u.value)==null?void 0:g.toString())||"";let s="";typeof e.type=="string"?s=e.type:Array.isArray(e.type)&&e.type.length>0&&(s=((m=e.type[0])==null?void 0:m.value)||((v=e.type[0])==null?void 0:v.target_id)||"");const o=e.sum??((D=(E=e.field_amount)==null?void 0:E[0])==null?void 0:D.value)??((A=(C=e.field_amount)==null?void 0:C[0])==null?void 0:A.target_id)??"0",r=(o==null?void 0:o.toString())||"0",i=e.dt||((j=(P=e.field_date)==null?void 0:P[0])==null?void 0:j.value)||"",a=e.dsc||((h=(d=e.field_description)==null?void 0:d[0])==null?void 0:h.value)||"",c=(y=e.field_category)==null?void 0:y[0],l=((x=e.cat!==void 0?e.cat:void 0)==null?void 0:x.toString())||((c==null?void 0:c.target_id)??(c==null?void 0:c.value)??"").toString(),f=Dt(e.cr??((O=(R=e.created)==null?void 0:R[0])==null?void 0:O.value)??e.created??void 0)??Date.now(),p=Dt(e.upd??e.updated??((z=(k=e.updated)==null?void 0:k[0])==null?void 0:z.value)??((K=(I=e.changed)==null?void 0:I[0])==null?void 0:K.value)??((he=(G=e.revision_timestamp)==null?void 0:G[0])==null?void 0:he.value))??f;return{id:t,type:s,sum:r,dt:i,dsc:a,cat:l,cr:f,updated:p,failed:!!e.failed}}function Je(){return navigator.onLine}function ts(){return`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async function ir(e,t){try{const s={method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":`Bearer ${t}`})},o=await fetch(`${Hs}/node/${e}?_format=json`,s);if(!o.ok){if(o.status===404)return null;throw o.status===403?await kt(o,s)?new Me("Authentication failed - user logged out"):new Me("Authentication failed"):new Error(`HTTP ${o.status}: ${o.statusText}`)}const r=await o.json();return jt(r)}catch(s){return console.error("Error fetching server item:",s),null}}async function ar(e,t){try{const s={method:e.method,headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":`Bearer ${t}`})};e.data&&e.method!=="DELETE"&&(s.body=JSON.stringify(e.data));const o=await fetch(e.url,s);if(!o.ok){if(e.type==="delete"&&o.status===404)return{success:!0};throw o.status===403?await kt(o,s)?new Me("Authentication failed - user logged out"):new Me("Authentication failed"):new Error(`HTTP ${o.status}: ${o.statusText}`)}let r=null;if(o.status!==204)try{r=await o.json()}catch(i){console.warn("No JSON payload returned for operation",e.id,i)}return{success:!0,data:r}}catch(s){return console.error("Error syncing operation:",s),{success:!1}}}function It(e,t){return Lt=Lt.catch(()=>{}).then(()=>lr(e,t)),Lt}async function lr(e,t){if(!Je()){console.log("Offline - skipping sync");return}const s=await Mt();if(s.length===0)return;Ts(),console.log(`Syncing ${s.length} pending operations...`);let o=!1,r=!1;try{const i=[...s].sort((c,l)=>c.timestamp-l.timestamp);let a=0;for(const c of i){a+=1;try{if(c.type==="update"&&c.itemId){const f=await Nt(c.itemId);if(!f){console.warn(`Local item ${c.itemId} not found, skipping update`),await nt(c.id),o=!0;continue}const p=await ir(c.itemId,e);if(p){const w=f.updated||f.cr||0,T=p.updated||p.cr||0;if(T>w){console.log(`Server version is newer for item ${c.itemId} (server: ${T}, local: ${w}). Using server version and skipping local update.`),await At(p),p.id&&(t==null||t(p.id),bt(p.id)),await nt(c.id),o=!0;continue}}else{console.warn(`Item ${c.itemId} not found on server, deleting locally to stay in sync`),await Tt(c.itemId),await nt(c.id),o=!0;continue}}const l=await ar(c,e);if(l.success){if(o=!0,c.type==="add"&&l.data)if(c.itemId&&c.itemId.startsWith("temp_")){const f=l.data,p=jt(f);await Tt(c.itemId),await Zt(p),p.id&&(t==null||t(p.id),bt(p.id))}else c.itemId&&(t==null||t(c.itemId),bt(c.itemId));else if(c.type==="update"&&l.data){const f=l.data,p=jt(f);await At(p),p.id&&(t==null||t(p.id),bt(p.id))}await nt(c.id)}else{r=!0;const f={...c,lastAttempt:Date.now(),retryCount:(c.retryCount||0)+1};f.retryCount>=50?(console.error(`Operation ${c.id} failed after 50 retries, removing from queue`),c.itemId&&(c.type==="add"||c.type==="update")&&await Ds(c.itemId,!0),await nt(c.id)):await Et(f)}}catch(l){if(r=!0,l instanceof Me)throw l;console.error(`Error processing operation ${c.id}:`,l)}a%rr===0&&await or()}await Qt({lastSyncTime:Date.now()})}catch(i){throw r=!0,i instanceof Me,i}finally{Es(o&&!r)}}async function ss(e,t,s="",o=""){if(!Je())return await rt()||[];Ts();let r=!1;try{const i={method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":`Bearer ${e}`})},a=await fetch(`${Hs}/api/expenses`,i);if(!a.ok)throw a.status===403?await kt(a,i)?new Me("Authentication failed - user logged out"):new Me("Authentication failed"):new Error(`HTTP ${a.status}: ${a.statusText}`);const l=(await a.json()).map(w=>{if(w.id&&w.dt&&!w.nid){const T=Dt(w.cr??w.created)??Date.now(),u=Dt(w.upd??w.updated)??T;return{...w,cr:T,updated:u,failed:!!w.failed}}return jt(w)}),f=await rt(),p=await cr(f||[],l);return await Kt(p),t&&Vt(p,w=>{Ht(p,w,t,s,o)}),await Qt({lastSyncTime:Date.now(),lastUpdated:Date.now()}),r=!0,p}catch(i){if(i instanceof Me)throw i;return console.error("Error syncing with server:",i),await rt()||[]}finally{Es(r)}}async function cr(e,t){const s=new Map(e.map(f=>[f.id,f])),o=new Map(t.map(f=>[f.id,f])),r=[],i=await Mt(),a=new Set(i.filter(f=>f.type==="delete").map(f=>f.itemId)),c=new Set(i.filter(f=>f.type==="add").map(f=>f.itemId)),l=new Set([...s.keys(),...o.keys()]);for(const f of l){const p=s.get(f),w=o.get(f);if(!p)w&&r.push(w);else if(w){const T=p.updated||p.cr||0;(w.updated||w.cr||0)>=T?r.push(w):r.push(p)}else{const T=f==null?void 0:f.startsWith("temp_"),u=c.has(f);(T||u)&&!a.has(f)&&r.push(p)}}return r.sort((f,p)=>{const w=new Date(p.dt).getTime()-new Date(f.dt).getTime();return w!==0?w:(p.cr||0)-(f.cr||0)})}function Ft(e){if(!Je()||(Ot=e,vt!==null))return;const t=()=>{vt=null,Ot&&It(Ot).catch(s=>{if(s instanceof Me){console.warn("Background sync stopped due to authentication error");return}console.error("Background sync failed",s)})};if(typeof window<"u"){const s=window.requestIdleCallback;if(typeof s=="function"){vt=s(t);return}vt=window.setTimeout(t,50)}else setTimeout(t,50)}async function dr(e,t){const s=await rt();if(s&&s.length>0,Je())try{await It(e),await ss(e,t)}catch(o){if(o instanceof Me){console.warn("Initial sync stopped due to authentication error");return}console.error("Error during initial sync:",o)}}function Xs(e,t,s){const o=async()=>{console.log("Network online - starting sync...");try{await It(e);const r=(s==null?void 0:s())||{};await ss(e,t,r.category||"",r.textFilter||"")}catch(r){if(r instanceof Me){console.warn("Sync after coming online stopped due to authentication error");return}console.error("Error syncing after coming online:",r)}};return window.addEventListener("online",o),()=>{window.removeEventListener("online",o)}}const ur=Object.freeze(Object.defineProperty({__proto__:null,AuthenticationError:Me,generateTempId:ts,initializeSync:dr,isOnline:Je,scheduleBackgroundSync:Ft,setupNetworkListener:Xs,syncPendingOperations:It,syncWithServer:ss},Symbol.toStringTag,{value:"Module"})),ns="https://dev-expenses-api.pantheonsite.io";function Ws(e,t,s){const o=t||ts(),r=e.type,i=Array.isArray(e.field_amount)?e.field_amount[0]:e.field_amount,a=Array.isArray(e.field_date)?e.field_date[0]:e.field_date,c=Array.isArray(e.field_description)?e.field_description[0]:e.field_description||"",l=Array.isArray(e.field_category)?e.field_category[0]:e.field_category||"",f=Date.now(),p=(s==null?void 0:s.cr)||f,w=f,T=(s==null?void 0:s.failed)||!1;return{id:o,type:r,sum:i.toString(),dt:a,dsc:c,cat:l,cr:p,updated:w,failed:T}}async function rs(e,t,s,o){const r=ts(),i=Ws(e,r);i.failed=!1;try{await Zt(i);const a={id:`add_${r}_${Date.now()}`,type:"add",itemType:e.type==="transaction"?"transaction":"incomes",itemId:r,data:e,url:`${ns}/node?_format=json`,method:"POST",timestamp:Date.now()};await Rt(a),Je()&&Ft(t),s(i)}catch(a){console.error("Error adding item offline:",a),o("Failed to add item. Please try again.")}}async function os(e,t,s,o,r,i){const a=Ws(e,t,o);a.cr=o.cr,a.failed=!1;try{await At(a);const c=await Jt(t),l=c.find(p=>p.type==="add"),f=c.find(p=>p.type==="update");if(l){const p={...l,data:e,timestamp:Date.now()};await Et(p)}else if(f){const p={...f,data:e,timestamp:Date.now()};await Et(p)}else{const p={id:`update_${t}_${Date.now()}`,type:"update",itemType:e.type==="transaction"?"transaction":"incomes",itemId:t,data:e,url:`${ns}/node/${t}?_format=json`,method:"PATCH",timestamp:Date.now()};await Rt(p)}Je()&&Ft(s),r(a)}catch(c){console.error("Error updating item offline:",c),i("Failed to update item. Please try again.")}}async function hr(e,t,s,o,r){try{await Tt(e);const i=await Jt(e),a=i.some(c=>c.type==="add");if(i.length&&await js(e),!a&&!e.startsWith("temp_")){const c={id:`delete_${e}_${Date.now()}`,type:"delete",itemType:t,itemId:e,url:`${ns}/node/${e}?_format=json`,method:"DELETE",timestamp:Date.now()};await Rt(c),Je()&&Ft(s)}o()}catch(i){console.error("Error deleting item offline:",i),r("Failed to delete item. Please try again.")}}const fr=Object.freeze(Object.defineProperty({__proto__:null,addItemOffline:rs,deleteItemOffline:hr,updateItemOffline:os},Symbol.toStringTag,{value:"Module"})),qs=({formType:e,values:t,onSuccess:s})=>{const o=pt(),r=Xe(),{data:i,dataDispatch:a}=pe(),c={field_amount:"",field_date:new Date().toISOString().substr(0,10),field_category:"",field_description:""},[l,f]=b.useState(e==="add"?c:t),{token:p}=xe(),w=d=>{const h=d.target.value;f({...l,[d.target.name]:h}),d.target.name==="field_category"&&(C(as[h]),P([]))},[T,u]=b.useState(!1),g=async d=>{d.preventDefault(),u(!0);const h={type:"transaction",title:[l.field_date],field_amount:[l.field_amount],field_category:[l.field_category],field_date:[l.field_date],field_description:[l.field_description]};try{if(e==="add")await rs(h,p,async y=>{s(),o("Success!",de.SUCCESS),u(!1),f(c),C([]),P([]),setTimeout(()=>{Le(p,a,r,i.category,i.textFilter)},0)},y=>{o(y,de.ERROR),u(!1)});else{const y=await Nt(t.nid);if(!y){o("Item not found in local cache",de.ERROR),u(!1);return}await os(h,t.nid,p,y,async x=>{s(),o("Success!",de.SUCCESS),u(!1),f(c),C([]),P([]),setTimeout(()=>{Le(p,a,r,i.category,i.textFilter)},0)},x=>{o(x,de.ERROR),u(!1)})}}catch{o("Something went wrong, please contact Constantin :)",de.ERROR),u(!1)}},m=new Date,v=m.getTimezoneOffset(),E=new Date(m.getTime()-v*60*1e3).toISOString().split("T")[0],[D,C]=b.useState(as[l.field_category]),[A,P]=b.useState([]);b.useEffect(()=>{if(e==="edit"&&l.field_description){const h=Us(l.field_description).filter(y=>D.some(x=>x.toLowerCase()===y.toLowerCase()));P(h)}else e==="add"&&P([])},[e,l.field_category,D]);const j=d=>{const h=ft(l.field_description,d);let y;h?(y=Gs(l.field_description,d),P(A.filter(x=>x!==d))):(y=zs(l.field_description,d),P([...A,d])),f({...l,field_description:y})};return n.jsxs("div",{children:[n.jsx("h2",{children:e==="add"?"Add transaction":"Edit transaction"}),n.jsxs("form",{className:"add-transaction",onSubmit:g,children:[n.jsx("input",{required:!0,placeholder:"Amount",type:"number",name:"field_amount",value:l.field_amount,onChange:w}),n.jsx("input",{required:!0,placeholder:"Date",type:"date",max:E,name:"field_date",value:l.field_date,onChange:w}),n.jsx("select",{required:!0,name:"field_category",value:l.field_category,onChange:w,children:Ze.map((d,h)=>n.jsx("option",{value:d.value,children:d.label},h))}),n.jsx("textarea",{placeholder:"Description",name:"field_description",rows:3,value:l.field_description,onChange:w}),D.length?n.jsx("ul",{className:"suggestions",children:D.map(d=>{const h=A.includes(d)||ft(l.field_description,d);return n.jsxs("li",{onClick:()=>j(d),className:h?"selected-suggestion":"",children:["#",d]},d)})}):null,n.jsx("button",{type:"submit",disabled:T,className:"button w-100",children:T?n.jsxs("div",{className:"loader",children:[n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"})]}):e==="add"?"Add transaction":"Edit transaction"})]})]})},pr=300,mr=300,gr=e=>1-Math.pow(1-e,3),xr=({number:e})=>{const[t,s]=b.useState(0),o=b.useRef(null),r=b.useRef(t);return r.current=t,b.useEffect(()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null);const i=r.current,a=e-i;if(a===0)return;const c=Math.min(mr,pr+Math.log10(Math.abs(a)+1)*250),l=performance.now(),f=p=>{const w=p-l,T=Math.min(w/c,1),u=gr(T),g=i+a*u,m=T<1?Math.round(g):Math.round(e);s(m),T<1?o.current=requestAnimationFrame(f):o.current=null};return o.current=requestAnimationFrame(f),()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null)}},[e]),n.jsx("div",{children:Ae(t)})},ot=b.memo(({icon:e,value:t,label:s,className:o=""})=>n.jsxs("div",{className:`stat-card ${o}`,children:[n.jsx("div",{className:"stat-icon",children:e}),n.jsx("div",{className:"stat-value",children:n.jsx(xr,{number:t})}),n.jsx("div",{className:"stat-label",children:s})]}));ot.displayName="StatCard";const Ks=()=>{const[e,t]=b.useState(null),[s,o]=b.useState(null),[r,i]=b.useState(null),[a,c]=b.useState(!1),[l,f]=b.useState(!1),[p,w]=b.useState({}),[T,u]=b.useState(null);return{startX:e,startY:s,swipedItemId:r,deleteVisible:a,editVisible:l,extraRowStyle:p,isSwiping:T,handleTouchStart:(E,D,C)=>{var P;const A=E.touches[0];if(A){t(A.clientX),o(A.clientY),i(D);const j=(P=C.current)==null?void 0:P.querySelector(`[data-id="${D}"]`);j&&(j.style.transition="transform 0s")}},handleTouchMove:(E,D)=>{var C;if(T===null){const A=E.touches[0];if(A&&e!==null&&s!==null){const P=e-A.clientX,j=s-A.clientY;u(Math.abs(P)>Math.abs(j))}}else if(T){document.body.style.overflow="hidden";const A=E.touches[0].clientX-(e??0),P=(C=D.current)==null?void 0:C.querySelector(`[data-id="${r}"]`);if(P){P.style.transform=`translateX(${A}px)`;const j=P.getBoundingClientRect().width,d=Math.abs(E.touches[0].clientX-(e??0));if(Math.min(d/j*100,100)>40){const x=document.querySelector("body");x&&x.classList.add("action-active")}else{const x=document.querySelector("body");x&&x.classList.remove("action-active")}const y=A>0;c(y),f(!y)}}},handleTouchEnd:(E,D,C,A,P)=>{var d;document.body.style.overflow="";const j=E.changedTouches[0];if(j&&e!==null){const h=j.clientX,y=(d=D.current)==null?void 0:d.querySelector(`[data-id="${C}"]`);if(T){const x=Math.abs(h-e),R=(y==null?void 0:y.getBoundingClientRect().width)||0;(R>0?x/R*100:0)>40&&(h>e?P(C):A(C))}y&&(y.style.transition="all .3s ease",y.style.transform="translateX(0)"),t(null),i(null),c(!1),f(!1),w({}),u(null)}}}},Zs=({itemId:e,failed:t})=>{const{pendingItemIds:s,syncedItems:o,isOnline:r,isSyncing:i}=Is(),a=s.has(e),c=o.has(e);let l=null,f="";return t?(l=n.jsx(ps,{size:14}),f="failed"):a?r?i?(l=n.jsx(gs,{size:14,className:"item-sync-indicator__spinner"}),f="syncing"):(l=n.jsx(xs,{size:14}),f="pending"):(l=n.jsx(ms,{size:14}),f="offline"):c&&(l=n.jsx(Ut,{size:14}),f="success"),l?n.jsx("div",{className:`item-sync-indicator item-sync-indicator--${f}`,children:l}):null},br=e=>e?e.split(/(#[a-zA-Z0-9\/]+(?:\s+[a-zA-Z0-9\/]+)*)/g).map((s,o)=>s.startsWith("#")?n.jsx("span",{className:"hashtag",children:s},o):n.jsx("span",{children:s},o)):null,yr=({transactions:e,categoryLabels:t,onEdit:s,onDelete:o,changedItems:r={},handleClearChangedItem:i,month:a,total:c,incomeTotals:l})=>{const f=b.useRef(null),[p,w]=b.useState(null),[T,u]=b.useState("desc");pe();const{handleTouchStart:g,handleTouchMove:m,handleTouchEnd:v,deleteVisible:E,editVisible:D,swipedItemId:C}=Ks();b.useEffect(()=>{i&&Object.keys(r).forEach(R=>{const O=setTimeout(()=>{i(R)},2e3);return()=>clearTimeout(O)})},[r,i]);const A=b.useMemo(()=>[...e,...Object.values(r).filter(R=>R.type==="removed"&&R.data.type==="transaction").map(R=>R.data)].sort((R,O)=>{const k=new Date(O.dt).getTime()-new Date(R.dt).getTime();return k!==0?k:(O.cr||0)-(R.cr||0)}),[e,r]),P=R=>{if(!R)return"";const O=t.find(k=>k.value===R);return(O==null?void 0:O.label)||Xn[R]||""},j=R=>{p===R?u(T==="asc"?"desc":"asc"):(w(R),u("desc"))},d=b.useMemo(()=>p?[...A].sort((R,O)=>{if(p==="date"){const k=new Date(R.dt).getTime(),z=new Date(O.dt).getTime();return T==="asc"?k-z:z-k}if(p==="amount"){const k=typeof R.sum=="string"?parseFloat(R.sum):parseFloat(String(R.sum)),z=typeof O.sum=="string"?parseFloat(O.sum):parseFloat(String(O.sum));return T==="asc"?k-z:z-k}return 0}):A,[A,p,T]),h=R=>p!==R?n.jsx(ys,{size:14}):T==="asc"?n.jsx(vs,{size:14}):n.jsx(ws,{size:14}),y=b.useMemo(()=>l&&a?l[a]:-1,[l,a]),x=b.useMemo(()=>y>0&&c?parseFloat((y-c).toFixed(2)):0,[y,c]);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"stats-grid",children:[n.jsx(ot,{icon:n.jsx(nn,{}),value:c||0,label:"Spent"}),y>0&&n.jsx(ot,{icon:n.jsx(bs,{}),value:y,label:"Income"}),y>0&&n.jsx(ot,{icon:x>=0?n.jsx(qt,{}):n.jsx(rn,{}),value:x,label:"Profit"})]}),n.jsxs("div",{className:"transaction-list-component",ref:f,children:[n.jsxs("div",{className:"sort-controls",children:[n.jsxs("button",{className:`sort-button ${p==="date"?"active":""}`,onClick:()=>j("date"),children:["Date ",h("date")]}),n.jsxs("button",{className:`sort-button ${p==="amount"?"active":""}`,onClick:()=>j("amount"),children:["Amount ",h("amount")]})]}),d.map(R=>{var he;const O=(he=r[R.id])==null?void 0:he.type,k=P(R.cat),z=new Date(R.dt),I=z.getDate(),K=He[z.getMonth()].substring(0,3).toUpperCase(),G=C===R.id;return n.jsxs("div",{className:`transaction-item-wrapper ${O||""}`,children:[n.jsxs("div",{className:`swipe-actions-background ${G&&(E||D)?"visible":""}`,children:[G&&E&&n.jsx("div",{className:"delete-action-bg",children:n.jsx(wt,{size:22,strokeWidth:2.5})}),G&&D&&n.jsx("div",{className:"edit-action-bg",children:n.jsx(St,{size:22,strokeWidth:2.5})})]}),n.jsxs("div",{"data-id":R.id,className:"transaction-list-item",onTouchStart:ee=>g(ee,R.id,f),onTouchMove:ee=>m(ee,f),onTouchEnd:ee=>v(ee,f,R.id,s,o),children:[n.jsxs("div",{className:"transaction-date-box",children:[n.jsx("div",{className:"date-day",children:I}),n.jsx("div",{className:"date-month",children:K})]}),n.jsx("div",{className:"transaction-category-box",children:n.jsx("div",{className:"category-name",children:k})}),n.jsx("div",{className:"transaction-content",children:n.jsxs("div",{className:"transaction-name",children:[br(R.dsc||""),n.jsx(Zs,{itemId:R.id,failed:R.failed})]})}),n.jsx("div",{className:"transaction-price",children:Ae(R.sum)}),n.jsxs("div",{className:"transaction-actions-desktop",children:[n.jsx("button",{className:"transaction-action-btn transaction-action-btn--edit",onClick:()=>s(R.id),"aria-label":"Edit transaction",children:n.jsx(St,{size:18})}),n.jsx("button",{className:"transaction-action-btn transaction-action-btn--delete",onClick:()=>o(R.id),"aria-label":"Delete transaction",children:n.jsx(wt,{size:18})})]})]})]},R.id)})]})]})},vr=ie.memo(yr),wr=()=>{const e=pt(),{token:t}=xe(),[s,o]=b.useState(!1),[r,i]=b.useState(!1),{data:a,dataDispatch:c}=pe(),l=a.groupedData===null,f=a.loading,p=Xe(),[w,T]=b.useState(!1);b.useEffect(()=>{l&&t&&Le(t,c,p)},[l,t]);const u=a.filtered||a,[g,m]=b.useState({}),v=d=>{c({type:"CLEAR_CHANGED_ITEM",id:d})},E=d=>{const h=u.groupedData[j].find(y=>y.id===d);m({nid:h.id,field_date:h.dt,field_amount:h.sum,field_category:h.cat,field_description:h.dsc}),i(!0)},D=d=>{d&&(T(!0),Bs(d,t,h=>{o(!1),h.ok?(e("Transaction was successfully deleted.",de.SUCCESS),T(!1),setTimeout(()=>{Le(t,c,p,a.category,a.textFilter)},0)):(e("Something went wrong.",de.ERROR),T(!1))}))},C=b.useMemo(()=>u.groupedData?Object.keys(u.groupedData):[],[u.groupedData]),[A,P]=b.useState(0),j=b.useMemo(()=>C[A]?C[A]:C[0],[C,A]);return b.useEffect(()=>{if(a!=null&&a.filtered){const d=Object.keys(C).find(h=>C[h]===j);P(parseInt(d))}else P(0)},[a.filtered]),n.jsxs("div",{style:{overflowX:"hidden",width:"100%"},children:[n.jsxs(Pt,{show:s,onClose:d=>{d.preventDefault(),o(!1)},children:[n.jsx("h3",{children:"Are you sure you want to delete the transaction?"}),n.jsx("button",{onClick:()=>D(s),className:"button-primary",children:w?n.jsxs("div",{className:"loader",children:[n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"})]}):"Yes, remove the transaction"})]}),n.jsx(Pt,{show:r,onClose:d=>{d.preventDefault(),i(!1)},children:n.jsx(qs,{formType:"edit",values:g,onSuccess:()=>{i(!1),setTimeout(()=>{Le(t,c,p,a.category,a.textFilter)},0)}})}),n.jsx("h2",{style:{padding:"0 1.5rem",marginBottom:"1rem"},children:j||"Expenses"}),n.jsx(Ys,{}),f?n.jsxs("div",{className:"lds-ripple",children:[n.jsx("div",{}),n.jsx("div",{})]}):l?"":n.jsx("div",{children:Object.keys(u.groupedData).length?n.jsxs(n.Fragment,{children:[n.jsx(vr,{transactions:u.groupedData[j],categoryLabels:Ze,onEdit:E,onDelete:d=>o(d),changedItems:a.changedItems,handleClearChangedItem:v,month:j,total:u.totals[j],incomeTotals:u.incomeTotals}),n.jsxs("div",{className:"pager-navigation",children:[n.jsx("button",{disabled:!C[A+1],onClick:()=>P(A+1),children:n.jsx(on,{})}),n.jsx("button",{disabled:!C[A-1],onClick:()=>P(A-1),children:n.jsx(an,{})})]})]}):""})]})},Sr=()=>{const e=Xe(),t=hs(),{loading:s,errorMessage:o,userIsLoggedIn:r}=xe(),[i,a]=b.useState(!1),c=b.useMemo(()=>`${window.location.origin}/expenses/login`,[]);r&&t("/expenses"),b.useEffect(()=>{const f=window.location.hash;if(f&&f.includes("access_token=")){const w=new URLSearchParams(f.replace(/^#/,"")).get("access_token");w&&(async()=>{try{const u=await En(e,{access_token:w});if(!u||!u.current_user)return;window.history.replaceState({},document.title,window.location.pathname+window.location.search),t("/expenses")}catch(u){console.log(u)}})()}},[e,t]);const l=()=>{a(!0);const f="https://accounts.google.com/o/oauth2/v2/auth?client_id=954790461001-2p4vab8hud9u6mj4n6hb6iio4uaiofe5.apps.googleusercontent.com&redirect_uri="+encodeURIComponent(c)+"&response_type=token&scope="+encodeURIComponent("openid email profile");window.location.href=f};return n.jsxs("div",{children:[n.jsx("h4",{children:"Please login using Google in order to access app functionality."}),o?n.jsxs("p",{children:["We have some errors: ",o]}):null,n.jsx("button",{onClick:l,className:"button wide",disabled:s||i,children:i?"Redirecting…":"Log in"})]})};function Ar(e){return ln({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(e)}const Tr=()=>{const e=pt(),t=Xe(),{dataDispatch:s}=pe(),{userDetails:o,token:r,currency:i}=xe();let{theme:a}=xe();a=Yt[a]?a:"blue-pink-gradient";const c=hs(),l=g=>{g.preventDefault(),Gt(t,s),c("/expenses/login")},f=g=>{const m={method:"PATCH",headers:new Headers({Accept:"application/json","Content-Type":"application/json","JWT-Authorization":"Bearer "+r}),body:JSON.stringify({field_currency:[g.target.value]})},v=`https://dev-expenses-api.pantheonsite.io/user/${o.current_user.uid}?_format=json`;Os(v,m,s,t,E=>{E.uid?(o.current_user.currency=E.field_currency[0].value,localStorage.setItem("currentUser",JSON.stringify(o)),t&&t({type:"UPDATE_USER",payload:{currency:E.field_currency[0].value}}),u(!0),setTimeout(()=>u(!1),2e3)):e("Something went wrong, please contact Constantin :)",de.ERROR)})},p=g=>{localStorage.setItem("theme",JSON.stringify(g.target.value)),t&&t({type:"UPDATE_USER",payload:{theme:g.target.value}})},w=Object.entries(Pn).sort((g,m)=>g[1]<m[1]?-1:1),[T,u]=b.useState(!1);return n.jsxs("div",{className:"user-page",children:[n.jsx("div",{className:T?"user-avatar saved":"user-avatar",children:n.jsx(Ar,{})}),n.jsx("h3",{children:o.current_user.name}),n.jsxs("div",{className:"user-settings",children:[n.jsx("select",{value:i,className:"currency",name:"currency",onChange:f,children:w.map(([g,m])=>n.jsx("option",{value:g,children:m},g))}),n.jsx("select",{value:a,className:"theme",name:"theme",onChange:p,children:Object.entries(Yt).map(([g,m])=>n.jsx("option",{value:g,children:m},g))}),n.jsx("button",{className:"button logout",onClick:l,children:"Logout"})]})]})},Er=()=>{const{token:e}=xe(),{dataDispatch:t}=pe(),s=Xe();return n.jsx(qs,{formType:"add",values:null,onSuccess:()=>{setTimeout(()=>{Le(e,t,s)},0)}})},Pr=({formType:e,values:t,onSuccess:s})=>{const o=pt(),r=Xe(),{data:i,dataDispatch:a}=pe(),c={field_amount:"",field_date:new Date().toISOString().substr(0,10),field_description:""},[l,f]=b.useState(e==="add"?c:t),{token:p}=xe(),[w,T]=b.useState([]);b.useEffect(()=>{if(e==="edit"&&l.field_description){const P=Us(l.field_description);T(P)}},[e,l.field_description]);const u=P=>{const j=P.target.value;f({...l,[P.target.name]:j})},[g,m]=b.useState(!1),v=async P=>{P.preventDefault(),m(!0);const j={type:"incomes",title:[l.field_date],field_amount:[l.field_amount],field_date:[l.field_date],field_description:[l.field_description]};try{if(e==="add")await rs(j,p,async d=>{s(),o("Success!",de.SUCCESS),m(!1),f(c),T([]),setTimeout(()=>{Le(p,a,r)},0)},d=>{o(d,de.ERROR),m(!1)});else{const d=await Nt(t.nid);if(!d){o("Item not found in local cache",de.ERROR),m(!1);return}await os(j,t.nid,p,d,async h=>{s(),o("Success!",de.SUCCESS),m(!1),f(c),T([]),setTimeout(()=>{Le(p,a,r)},0)},h=>{o(h,de.ERROR),m(!1)})}}catch{o("Something went wrong, please contact Sergiu S :)",de.ERROR),m(!1)}},E=P=>{const j=ft(l.field_description,P);let d;j?(d=Gs(l.field_description,P),T(w.filter(h=>h!==P))):(d=zs(l.field_description,P),T([...w,P])),f({...l,field_description:d})},D=new Date,C=D.getTimezoneOffset(),A=new Date(D.getTime()-C*60*1e3).toISOString().split("T")[0];return n.jsxs("div",{children:[n.jsx("h2",{children:e==="add"?"Add income":"Edit income"}),n.jsxs("form",{className:"add-transaction",onSubmit:v,children:[n.jsx("input",{required:!0,placeholder:"Amount",type:"number",name:"field_amount",value:l.field_amount,onChange:u}),n.jsx("input",{required:!0,placeholder:"Date",type:"date",max:A,name:"field_date",value:l.field_date,onChange:u}),n.jsx("textarea",{placeholder:"Description",name:"field_description",rows:3,value:l.field_description,onChange:u}),n.jsx("ul",{className:"suggestions",children:Cs.map(P=>{const j=w.includes(P)||ft(l.field_description,P);return n.jsxs("li",{onClick:()=>E(P),className:j?"selected-suggestion":"",children:["#",P]},P)})}),n.jsx("button",{type:"submit",disabled:g,className:"button w-100",children:g?n.jsxs("div",{className:"loader",children:[n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"})]}):e==="add"?"Add income":"Edit income"})]})]})},Dr=e=>e?e.split(/(#[a-zA-Z0-9\/]+(?:\s+[a-zA-Z0-9\/]+)*)/g).map((s,o)=>s.startsWith("#")?n.jsx("span",{className:"hashtag",children:s},o):n.jsx("span",{children:s},o)):null,jr=({transactions:e,onEdit:t,onDelete:s,changedItems:o={},handleClearChangedItem:r})=>{const i=b.useRef(null),[a,c]=b.useState(null),[l,f]=b.useState("desc"),{handleTouchStart:p,handleTouchMove:w,handleTouchEnd:T,deleteVisible:u,editVisible:g,swipedItemId:m}=Ks();b.useEffect(()=>{r&&Object.keys(o).forEach(A=>{const P=setTimeout(()=>{r(A)},2e3);return()=>clearTimeout(P)})},[o,r]);const v=b.useMemo(()=>[...e,...Object.values(o).filter(A=>A.type==="removed"&&A.data.type==="incomes").map(A=>A.data)].sort((A,P)=>{const j=new Date(P.dt).getTime()-new Date(A.dt).getTime();return j!==0?j:(P.cr||0)-(A.cr||0)}),[e,o]),E=A=>{a===A?f(l==="asc"?"desc":"asc"):(c(A),f("desc"))},D=b.useMemo(()=>a?[...v].sort((A,P)=>{if(a==="date"){const j=new Date(A.dt).getTime(),d=new Date(P.dt).getTime();return l==="asc"?j-d:d-j}if(a==="amount"){const j=typeof A.sum=="string"?parseFloat(A.sum):parseFloat(String(A.sum)),d=typeof P.sum=="string"?parseFloat(P.sum):parseFloat(String(P.sum));return l==="asc"?j-d:d-j}return 0}):v,[v,a,l]),C=A=>a!==A?n.jsx(ys,{size:14}):l==="asc"?n.jsx(vs,{size:14}):n.jsx(ws,{size:14});return n.jsxs("div",{className:"transaction-list-component income-list",ref:i,children:[n.jsxs("div",{className:"sort-controls",children:[n.jsxs("button",{className:`sort-button ${a==="date"?"active":""}`,onClick:()=>E("date"),children:["Date ",C("date")]}),n.jsxs("button",{className:`sort-button ${a==="amount"?"active":""}`,onClick:()=>E("amount"),children:["Amount ",C("amount")]})]}),D.map(A=>{var R;const P=(R=o[A.id])==null?void 0:R.type,j=new Date(A.dt),d=j.getDate(),h=He[j.getMonth()].substring(0,3).toUpperCase(),y=j.getFullYear(),x=m===A.id;return n.jsxs("div",{className:`transaction-item-wrapper ${P||""}`,children:[n.jsxs("div",{className:`swipe-actions-background ${x&&(u||g)?"visible":""}`,children:[x&&u&&n.jsx("div",{className:"delete-action-bg",children:n.jsx(wt,{})}),x&&g&&n.jsx("div",{className:"edit-action-bg",children:n.jsx(St,{})})]}),n.jsxs("div",{"data-id":A.id,className:"transaction-list-item",onTouchStart:O=>p(O,A.id,i),onTouchMove:O=>w(O,i),onTouchEnd:O=>T(O,i,A.id,t,s),children:[n.jsxs("div",{className:"transaction-date-box",children:[n.jsx("div",{className:"date-day",children:d}),n.jsx("div",{className:"date-month",children:h}),n.jsx("div",{className:"date-year",children:y})]}),n.jsx("div",{className:"transaction-content",children:n.jsxs("div",{className:"transaction-name",children:[Dr(A.dsc||""),n.jsx(Zs,{itemId:A.id,failed:A.failed})]})}),n.jsx("div",{className:"transaction-price",children:Ae(A.sum)}),n.jsxs("div",{className:"transaction-actions-desktop",children:[n.jsx("button",{className:"transaction-action-btn transaction-action-btn--edit",onClick:()=>t(A.id),"aria-label":"Edit income",children:n.jsx(St,{size:18})}),n.jsx("button",{className:"transaction-action-btn transaction-action-btn--delete",onClick:()=>s(A.id),"aria-label":"Delete income",children:n.jsx(wt,{size:18})})]})]})]},A.id)})]})},Cr=ie.memo(jr);function _r(){const{data:e,dataDispatch:t}=pe(),[s,o]=b.useState({textFilter:e.incomeTextFilter||"",selectedTags:e.incomeSelectedTags||[]}),[r,i]=b.useState(!1),a=b.useRef(null),c=b.useRef(null),l=b.useCallback(u=>{const g=u.target.value;o(m=>({...m,textFilter:g})),t({type:"FILTER_INCOME_DATA",textFilter:g,selectedTags:s.selectedTags})},[t,s.selectedTags]),f=b.useCallback((u,g)=>{g.preventDefault(),g.stopPropagation();const m=s.selectedTags.includes(u)?s.selectedTags.filter(v=>v!==u):[...s.selectedTags,u];o(v=>({...v,selectedTags:m})),t({type:"FILTER_INCOME_DATA",textFilter:s.textFilter,selectedTags:m}),a.current&&a.current.focus()},[t,s.textFilter,s.selectedTags]),p=b.useCallback(()=>{o({textFilter:"",selectedTags:[]}),i(!1),a.current&&a.current.blur(),t({type:"FILTER_INCOME_DATA",textFilter:"",selectedTags:[]})},[t]),w=b.useCallback(()=>{i(!0)},[]),T=b.useCallback(u=>{const g=u.relatedTarget;c.current&&c.current.contains(g)||s.textFilter||s.selectedTags.length>0||i(!1)},[s.textFilter,s.selectedTags.length]);return n.jsxs("div",{className:"filters income-filters",children:[n.jsxs("div",{className:"income-filters__top-row",children:[n.jsx("div",{className:"filters__search filters__search--always-open",children:n.jsxs("div",{className:"filters__search-input-wrapper",children:[n.jsx(Bt,{size:18,className:"filters__search-icon"}),n.jsx("input",{ref:a,type:"text",value:s.textFilter,name:"textFilter",onChange:l,onFocus:w,onBlur:T,placeholder:"Filter by text",className:"filters__input"}),s.textFilter&&n.jsx("button",{className:"filters__close-button",onClick:()=>{o(u=>({...u,textFilter:""})),t({type:"FILTER_INCOME_DATA",textFilter:"",selectedTags:s.selectedTags})},"aria-label":"Clear search",children:n.jsx(fs,{size:16})})]})}),(s.textFilter||s.selectedTags.length>0)&&n.jsx("button",{onClick:p,className:"filters__clear-button",children:"Clear Filters"})]}),(r||s.textFilter||s.selectedTags.length>0)&&n.jsx("div",{className:"filters__tags",ref:c,children:Cs.map(u=>{const g=s.selectedTags.includes(u);return n.jsxs("button",{onClick:m=>f(u,m),onMouseDown:m=>m.preventDefault(),className:`filters__tag ${g?"filters__tag--selected":""}`,children:["#",u]},u)})})]})}const Nr=ie.memo(_r);function Rr(){const{data:e}=pe(),{currency:t}=xe(),[s,o]=b.useState(new Set),r=(e==null?void 0:e.filteredIncomeData)!==null,{totalIncomePerYear:i,totalIncomePerYearAndMonth:a}=b.useMemo(()=>{if(r&&(e!=null&&e.filteredIncomeData)){const v={},E={};return e.filteredIncomeData.forEach(D=>{const C=new Date(D.dt),A=C.getFullYear().toString(),j=`${He[C.getMonth()]} ${A}`,d=parseFloat(D.sum||"0");v[A]=(v[A]||0)+d,E[A]||(E[A]={}),E[A][j]=(E[A][j]||0)+d}),{totalIncomePerYear:v,totalIncomePerYearAndMonth:E}}return{totalIncomePerYear:(e==null?void 0:e.totalIncomePerYear)||{},totalIncomePerYearAndMonth:(e==null?void 0:e.totalIncomePerYearAndMonth)||{}}},[r,e==null?void 0:e.filteredIncomeData,e==null?void 0:e.totalIncomePerYear,e==null?void 0:e.totalIncomePerYearAndMonth]),c=(e==null?void 0:e.totalPerYear)||{},l=(e==null?void 0:e.totalSpent)||0,f=Ls(a),p={chart:{type:"line",zoomType:"x"},boost:{useGPUTranslations:!0},title:{text:"Years in review"},xAxis:{type:"category",categories:He,crosshair:!0},yAxis:{title:{text:t}},tooltip:{shared:!0,split:!0},credits:{enabled:!1},series:f};let w=0,T=0;const u=Object.keys(i).sort((v,E)=>parseInt(v)-parseInt(E)),g=(v,E)=>!E||E===0?null:(v-E)/E*100,m=(v,E=!1)=>{if(v===null)return null;const D=v>=0?"+":"";let C;return E?C=v>=0?"#f87171":"#4ade80":C=v>=0?"#4ade80":"#f87171",n.jsxs("span",{style:{color:C},children:[" (",D,Ae(v),"%)"]})};return n.jsxs(n.Fragment,{children:[n.jsx(Wt,{highcharts:Re,options:p}),n.jsx("span",{className:"heading",children:"Total income per year:"}),n.jsx("div",{className:"table-wrapper",children:n.jsxs("table",{className:"expenses-table",cellSpacing:"0",cellPadding:"0",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Year"}),n.jsx("th",{children:"Income"}),!r&&n.jsxs(n.Fragment,{children:[n.jsx("th",{children:"Spent"}),n.jsx("th",{children:"Savings"})]})]})}),n.jsxs("tbody",{children:[u.map((v,E)=>{const D=i[v],C=r?0:c[v]||0,A=D-C,P=r?0:(C/D-1)*-100,j=E-1,d=j>=0?u[j]:null,h=d?i[d]:null,y=r?null:d?c[d]||0:null,x=h!==null?g(D,h):null,R=!r&&y!==null?g(C,y):null;w+=A,T+=D;const O=`income-${v}`,k=`spent-${v}`,z=s.has(O),I=s.has(k),K=G=>{o(he=>{const ee=new Set(he);return ee.has(G)?ee.delete(G):ee.add(G),ee})};return n.jsxs("tr",{children:[n.jsx("td",{children:v}),n.jsxs("td",{children:[n.jsxs("span",{onClick:()=>K(O),style:{cursor:"pointer",userSelect:"none"},children:[Ae(D)," ",t]}),z&&m(x,!1)]}),!r&&n.jsxs(n.Fragment,{children:[n.jsxs("td",{children:[n.jsxs("span",{onClick:()=>K(k),style:{cursor:"pointer",userSelect:"none"},children:[Ae(C)," ",t]}),I&&m(R,!0)]}),n.jsx("td",{children:isFinite(P)?`${Ae(A)} ${t} (${Ae(P)}%)`:`${Ae(A)} ${t}`})]})]},E)}),n.jsxs("tr",{children:[n.jsx("td",{children:"Total"}),n.jsxs("td",{children:[Ae(T)," ",t]}),!r&&n.jsxs(n.Fragment,{children:[n.jsxs("td",{children:[Ae(l)," ",t]}),n.jsxs("td",{children:[Ae(w)," ",t," (",Ae((l/T-1)*-100),"%)"]})]})]})]})]})})]})}function Mr(){const{data:e}=pe(),t=(e==null?void 0:e.filteredIncomeData)!==null?((e==null?void 0:e.filteredIncomeData)||[]).length:e.raw?e.raw.filter(s=>s.type==="incomes").length:0;return n.jsxs("div",{className:"total-income-count",style:{padding:"0.5rem 1rem",textAlign:"center",fontSize:"0.9rem",color:"#a0a0a0",fontWeight:"400"},children:[t.toLocaleString()," incomes"]})}const kr=ie.lazy(()=>Ne(()=>import("./IncomeSources-CqCaqyIf.js"),__vite__mapDeps([12,1,2,3]))),Ir=()=>{const e=pt(),{token:t}=xe(),[s,o]=b.useState(!1),[r,i]=b.useState(!1),[a,c]=b.useState(!1),{data:l,dataDispatch:f}=pe(),p=l.groupedData===null,w=Xe(),[T,u]=b.useState(!1),[g,m]=b.useState(20);b.useEffect(()=>{p&&Le(t,f,w)},[l,f,p,t,w]);const[v,E]=b.useState({nid:"",field_date:"",field_amount:"",field_description:""}),D=h=>{const y=(P||l.incomeData||[]).find(x=>x.id===h);E({nid:y.id,field_date:y.dt,field_amount:y.sum,field_description:y.dsc}),i(!0)},C=(h,y)=>{u(!0),Bs(h,y,x=>{x.ok?(e("Income was successfully deleted.",de.SUCCESS),u(!1)):(e("Something went wrong.",de.ERROR),u(!1)),o(!1),Le(y,f,w)})},A=h=>{f({type:"CLEAR_CHANGED_ITEM",id:h})},P=l.filteredIncomeData!==null?l.filteredIncomeData:l.incomeData,j=b.useMemo(()=>!P||!P.length?0:P.reduce((h,y)=>h+parseFloat(y.sum||"0"),0),[P]),d=b.useMemo(()=>{var R;if(!l.raw||!l.raw.length||j===0)return 0;const h=(R=l.raw[l.raw.length-1])==null?void 0:R.dt;if(!h)return 0;const x=((new Date().getTime()-new Date(h).getTime())/864e5+1)/30.42;return j/x},[l.raw,j]);return n.jsxs("div",{className:"incomes-page",children:[n.jsxs(Pt,{show:s,onClose:h=>{h.preventDefault(),o(!1)},children:[n.jsx("h3",{children:"Are you sure you want to delete the income?"}),n.jsx("button",{onClick:()=>C(s,t),className:"button-primary",children:T?n.jsxs("div",{className:"loader",children:[n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"}),n.jsx("span",{className:"loader__element"})]}):"Yes, remove the income"})]}),n.jsx(Pt,{show:r,onClose:h=>{h.preventDefault(),i(!1),c(!1)},children:n.jsx(Pr,{formType:a?"add":"edit",values:v,onSuccess:()=>{i(!1),c(!1),Le(t,f,w)}})}),n.jsx("h2",{style:{padding:"0 1.5rem",marginBottom:"1rem"},children:"Incomes"}),!p&&n.jsx(Mr,{}),!p&&n.jsx(Nr,{}),p?"":n.jsxs("div",{children:[P&&P.length>0&&n.jsxs("div",{className:"stats-grid",children:[n.jsx(ot,{icon:n.jsx(bs,{}),value:j,label:"Total Income"}),n.jsx(ot,{icon:n.jsx(qt,{}),value:d,label:"Average Income"})]}),n.jsx("div",{className:"income-button-container",children:n.jsx("button",{onClick:()=>{i(!0),c(!0)},className:"button-primary income-add-button",children:"Add new income"})}),P&&P.length?n.jsx(Cr,{transactions:P.slice(0,g),onEdit:D,onDelete:h=>o(h),changedItems:l.changedItems,handleClearChangedItem:A}):"",P&&P.length>g&&n.jsx("div",{style:{padding:"0 1.5rem",marginTop:"1.5rem",textAlign:"center"},children:n.jsx("button",{onClick:()=>m(g+10),className:"button-secondary",children:"Load more"})})]}),P&&P.length?n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(kr,{})})}):"",P&&P.length?n.jsx("div",{className:"charts-section",children:n.jsx(b.Suspense,{fallback:"",children:n.jsx(Rr,{})})}):""]})},Fr=[{path:"/expenses/login",component:Sr,isPrivate:!1},{path:"/expenses/charts",component:nr,isPrivate:!0},{path:"/expenses",component:wr,isPrivate:!0},{path:"/expenses/user",component:Tr,isPrivate:!0},{path:"/expenses/add-transaction",component:Er,isPrivate:!0},{path:"/expenses/income",component:Ir,isPrivate:!0}];function Lr(){const{userIsLoggedIn:e}=xe(),[t,s]=b.useState("closed");return b.useState(null),b.useState(null),n.jsx("div",{className:`navbar ${t}`,children:n.jsxs("ul",{children:[n.jsx("li",{children:n.jsx(ct,{to:"/expenses/",end:!0,children:n.jsx(cn,{})})}),n.jsx("li",{children:n.jsx(ct,{to:"/expenses/charts",children:n.jsx(dn,{})})}),n.jsx("li",{children:n.jsx(ct,{to:"/expenses/add-transaction",children:n.jsx(un,{})})}),n.jsx("li",{children:n.jsx(ct,{to:"/expenses/income",children:n.jsx(qt,{})})}),e?n.jsx("li",{children:n.jsx(ct,{to:"/expenses/user",children:n.jsx(hn,{})})}):""]})})}const Or=()=>{var f;const{isOnline:e,isSyncing:t,syncSuccess:s,pendingCount:o}=Is(),{data:r}=pe(),i=((f=r==null?void 0:r.raw)==null?void 0:f.filter(p=>p.failed).length)||0;let a,c="",l="";return e?i>0?(a=n.jsx(ps,{size:16}),c=`Failed to sync ${i} item${i===1?"":"s"}`,l="error"):t?(a=n.jsx(gs,{size:16,className:"sync-status-indicator__icon--spinning"}),c=o>0?`Syncing ${o} item${o===1?"":"s"}`:"Syncing...",l="syncing"):o>0?(a=n.jsx(xs,{size:16}),c=`${o} item${o===1?"":"s"} pending`,l="pending"):s?(a=n.jsx(Ut,{size:16}),c="Synced",l="success"):(a=n.jsx(Ut,{size:16}),l="idle"):(a=n.jsx(ms,{size:16}),c=o>0?`${o} pending • Offline`:"Offline",l="offline"),n.jsxs("div",{className:`sync-status-indicator sync-status-indicator--${l}`,children:[a,c&&n.jsx("span",{children:c})]})},Br=()=>{const{token:e}=xe(),{data:t,dataDispatch:s}=pe(),o=Xe(),r=b.useRef({category:(t==null?void 0:t.category)||"",textFilter:(t==null?void 0:t.textFilter)||""});return b.useEffect(()=>{$n(o,s)},[o,s]),b.useEffect(()=>{r.current={category:t&&t.category||"",textFilter:t&&t.textFilter||""}},[t==null?void 0:t.category,t==null?void 0:t.textFilter]),b.useEffect(()=>{if(e)return Xs(e,s,()=>r.current)},[e,s]),null};function Ur(){return n.jsx(In,{children:n.jsx(Ln,{children:n.jsx(On,{children:n.jsxs(Qs,{children:[n.jsx(Br,{}),n.jsx(Or,{}),n.jsx(Lr,{}),n.jsx(en,{children:Fr.map(e=>n.jsx(tn,{path:e.path,element:n.jsx(Bn,{component:e.component,isPrivate:e.isPrivate})},e.path))})]})})})})}function zr(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:r,onRegisteredSW:i,onRegisterError:a}=e;let c,l;const f=async(w=!0)=>{await l};async function p(){if("serviceWorker"in navigator){if(c=await Ne(()=>import("./workbox-window.prod.es5-DFjpnwFp.js"),__vite__mapDeps([])).then(({Workbox:w})=>new w("/expenses/sw.js",{scope:"/expenses/",type:"classic"})).catch(w=>{a==null||a(w)}),!c)return;c.addEventListener("activated",w=>{(w.isUpdate||w.isExternal)&&window.location.reload()}),c.addEventListener("installed",w=>{w.isUpdate||o==null||o()}),c.register({immediate:t}).then(w=>{i?i("/expenses/sw.js",w):r==null||r(w)}).catch(w=>{a==null||a(w)})}}return l=p(),f}zr({immediate:!0,scope:"/expenses/"});sn.render(n.jsx(ie.StrictMode,{children:n.jsx(Ur,{})}),document.getElementById("root"));export{xe as a,Ae as f,ft as h,Cs as i,n as j,He as m,pe as u};
