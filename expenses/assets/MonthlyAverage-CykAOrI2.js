import{u as C,a as N,j as e,f as n}from"./index-0Q4orPYt.js";import{r as c}from"./react-vendor-DObCo5uo.js";import{u as H,g as j}from"./useSortableData-BQ-KTF28.js";import"./charts-vendor-BgOMIWtF.js";import"./icons-vendor-CjON0rrL.js";function I(){var p;const{data:o}=C(),{currency:u}=N(),[r,k]=c.useState(!1);c.useEffect(()=>{},[o.raw,o.categoryTotals]);const w=(p=o.raw[o.raw.length-1])==null?void 0:p.dt,a=((new Date().getTime()-new Date(w).getTime())/864e5+1)/30.42,W=o.totalSpent/a,{hourlyWage:T,hoursPerMonth:O,categoryHoursOfWork:h}=c.useMemo(()=>{if(!r||!o.raw||o.raw.length===0)return{hourlyWage:0,hoursPerMonth:0,categoryHoursOfWork:{}};const l=o.raw.filter(s=>s.type==="incomes").reduce((s,g)=>s+parseFloat(g.sum||"0"),0),i=a>0?l/a:0,m=40*4.33,d=m>0?i/m:0,x={};return Object.values(o.categoryTotals||[]).forEach(s=>{if(s&&s.name){const g=a>0?s.y/a:0;x[s.name]=d>0?g/d:0}}),{hourlyWage:d,hoursPerMonth:m,categoryHoursOfWork:x}},[r,o.raw,o.categoryTotals,a]),b=c.useMemo(()=>Object.values(o.categoryTotals||[]).map(t=>({...t,hoursOfWork:r&&h[t.name]||0})),[o.categoryTotals,r,h]),{sortedItems:v,requestSort:f,sortConfig:y}=H(b),S=c.useMemo(()=>r?{totalHoursOfWork:Object.values(h).reduce((l,i)=>l+i,0)}:{totalHoursOfWork:0},[r,h]);return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"heading",children:"Monthly average per category"}),e.jsx("div",{className:"true-cost-toggle-wrapper",children:e.jsxs("label",{className:"true-cost-toggle",htmlFor:"true-cost-toggle",children:[e.jsx("input",{type:"checkbox",id:"true-cost-toggle",checked:r,onChange:t=>k(t.target.checked)}),e.jsx("span",{className:"toggle-slider"}),e.jsx("span",{className:"toggle-label",children:"Show True Cost (Hours of Life Worked)"})]})}),r&&e.jsxs("div",{style:{padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#a0a0a0",marginBottom:"1rem",marginTop:"0.5rem"},children:[e.jsx("p",{children:"See how much of your life you trade for each expense category"}),e.jsxs("p",{style:{fontStyle:"italic",marginTop:"0.25rem"},children:["Based on your hourly after-tax wage: ",n(T)," ",u,"/hour"]})]}),e.jsxs("table",{className:`daily-average ${r?"true-cost-table":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Category"}),e.jsx("th",{onClick:()=>f("y"),className:`sortable ${j(y,"y")}`,children:"Amount"}),r&&e.jsx("th",{onClick:()=>f("hoursOfWork"),className:`sortable ${j(y,"hoursOfWork")}`,children:"Hours of Life Worked"})]})}),e.jsx("tbody",{children:v.map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsxs("td",{children:[n(t.y/a)," ",u," / month"]}),r&&e.jsxs("td",{children:[n(t.hoursOfWork||0)," hours"]})]},l))})]}),e.jsxs("div",{className:"average-spending",children:["Average spending per month: ",n(W)," ",u]}),r&&e.jsx("div",{style:{padding:"1rem",fontSize:"0.9rem",color:"#a0a0a0",fontStyle:"italic",marginTop:"0.5rem"},children:e.jsxs("p",{children:["This table shows you exactly how much of your life you traded for each expense. Use it to identify areas where you might want to reduce spending. Total hours per month: ",n(S.totalHoursOfWork)," hours of ",n(O)," worked per month."]})})]})}export{I as default};
