import{u as oe,a as re,m as x,h as ae,f as U,j as o}from"./index-0Q4orPYt.js";import{r as _}from"./react-vendor-DObCo5uo.js";import{H as ie,a as le}from"./charts-vendor-BgOMIWtF.js";import"./icons-vendor-CjON0rrL.js";function ge(){const{data:p}=oe(),{currency:$}=re(),[u,G]=_.useState(null),s=_.useMemo(()=>{if(!p.raw||p.raw.length===0)return{historicalInterest:[],historicalExpenses:[],projectedInterest:[],projectedExpenses:[],categories:[],historicalCategories:[],projectedCategories:[],fiPercentage:0,crossoverPoint:null,currentYield:0,averageMonthlySavings:0,currentAssets:0};const i=[...p.raw].sort((e,n)=>new Date(e.dt).getTime()-new Date(n.dt).getTime()),t={};i.forEach(e=>{const n=new Date(e.dt),a=`${x[n.getMonth()]} ${n.getFullYear()}`;t[a]||(t[a]={interestIncome:0,expenses:0,totalIncome:0}),e.type==="incomes"?(t[a].totalIncome+=parseFloat(e.sum||"0"),e.dsc&&ae(e.dsc,"interest")&&(t[a].interestIncome+=parseFloat(e.sum||"0"))):e.type==="transaction"&&(t[a].expenses+=parseFloat(e.sum||"0"))});const c=Object.keys(t).sort((e,n)=>{const a=e.split(" "),E=n.split(" "),Y=x.indexOf(a[0]),ne=x.indexOf(E[0]),N=parseInt(a[1]),V=parseInt(E[1]);return N!==V?N-V:Y-ne}),l=c.slice(-12),d=[],r=[],m=[],y=[];l.forEach((e,n)=>{const a=t[e].expenses,E=t[e].interestIncome||0;if(d.push(E),m.push(e),n<2)y.push(a);else{const Y=(t[l[n-2]].expenses+t[l[n-1]].expenses+a)/3;y.push(Y)}}),r.push(...y);const g=c.slice(-6),h=[];g.forEach(e=>{const n=t[e].totalIncome-t[e].expenses;h.push(n)});const T=h.length>0?h.reduce((e,n)=>e+n,0)/h.length:0,k=l.map(e=>t[e].interestIncome||0),C=k.reduce((e,n)=>e+n,0)/k.length,v=g.map(e=>t[e].interestIncome||0).reduce((e,n)=>e+n,0)/6,R=.05,X=R/12;let j=0;v>0&&(j=v/X);let F=R;j>0&&C>0&&(F=C/j*12);const O=u!==null?u:F,I=O/12;let A=j;v>0&&I>0&&(A=v/I);const H=[],W=[],D=[];let b=A,S=null;const Z=r.length>0?r[r.length-1]:0,B=(l.length>0?l[l.length-1]:c[c.length-1]).split(" ");let P=x.indexOf(B[0]),z=parseInt(B[1]),M=Z;for(let e=1;e<=60;e++){P++,P>=12&&(P=0,z++);const n=`${x[P]} ${z}`;D.push(n),M=M*1.002,W.push(M),b=b+T+b*I;const a=b*I;H.push(a),!S&&a>0&&a>=M&&(S=n)}const ee=d.length>0?d[d.length-1]:0,L=r.length>0?r[r.length-1]:0,te=L>0?ee/L*100:0,se=[...m,...D];return{historicalInterest:d,historicalExpenses:r,projectedInterest:H,projectedExpenses:W,categories:se,historicalCategories:m,projectedCategories:D,fiPercentage:te,crossoverPoint:S,currentYield:O,averageMonthlySavings:T,currentAssets:A}},[p.raw,u]),K=[...s.historicalInterest,...s.projectedInterest],q=[...s.historicalExpenses,...s.projectedExpenses],w=s.crossoverPoint?s.categories.indexOf(s.crossoverPoint):-1,J=w>=0?s.categories.map((i,t)=>t===w?K[t]:null):[],f=s.historicalCategories.length-1,Q={chart:{type:"line",zoomType:"x"},boost:{useGPUTranslations:!0},title:{text:"Wealth Velocity - Path to Financial Independence"},subtitle:s.crossoverPoint?{text:`üéâ Projected Retirement Day: ${s.crossoverPoint}`}:{text:"Keep going! Your investment income is growing."},xAxis:{categories:s.categories,crosshair:!0,plotLines:[{value:f,color:"#888",dashStyle:"dash",width:2,label:{text:"Today",align:"right",style:{color:"#888"}}}]},yAxis:{title:{text:`Amount (${$})`}},tooltip:{shared:!0,formatter:function(){var d;let i=`<b>${this.x}</b><br/>`;const t=s.categories.indexOf(this.x),c=t>f,l=t<=f;return(d=this.points)==null||d.forEach(r=>{var g,h;const m=r.y;(((g=r.series.name)==null?void 0:g.includes("Interest"))||((h=r.series.name)==null?void 0:h.includes("Passive")))&&m===0&&l?i+=`<span style="color:${r.color}">‚óè</span> ${r.series.name}: <b>No interest data recorded</b><br/>`:i+=`<span style="color:${r.color}">‚óè</span> ${r.series.name}: <b>${U(m)} ${$}</b>${c?" (Projected)":""}<br/>`}),t===w&&(i+='<br/><span style="color:#4ade80; font-weight: bold;">üéâ Cross-over Point: Financial Independence!</span>'),i}},credits:{enabled:!1},series:[{name:"Passive Income (Historical)",data:s.historicalInterest.map((i,t)=>({y:i,marker:{enabled:!1}})),color:"#4ade80",lineWidth:3,dashStyle:"Solid"},{name:"Passive Income (Projected)",data:s.categories.map((i,t)=>{if(t<=f)return null;const c=t-s.historicalCategories.length;return{y:s.projectedInterest[c],marker:{enabled:!1}}}),color:"#4ade80",lineWidth:3,dashStyle:"Dash"},{name:"Monthly Expenses (3-Month Avg)",data:q.map((i,t)=>({y:i,marker:{enabled:!1}})),color:"#f87171",lineWidth:3,dashStyle:"Solid"},{name:"Cross-over Point",data:J,type:"scatter",color:"#ffd700",marker:{enabled:!0,radius:8,symbol:"diamond"},enableMouseTracking:!0}],plotOptions:{line:{marker:{enabled:!1,radius:3}}}};return!p.raw||p.raw.length===0?null:o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{padding:"1rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",marginBottom:"1rem"},children:[o.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"#a0a0a0",fontSize:"0.9rem"},children:["Expected Annual Return: ",U(s.currentYield*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"20",step:"0.1",value:u!==null?u*100:s.currentYield*100,onChange:i=>{const t=parseFloat(i.target.value)/100;G(t)},style:{width:"100%",height:"8px",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)",outline:"none",cursor:"pointer"}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.25rem",fontSize:"0.75rem",color:"#888"},children:[o.jsx("span",{children:"0%"}),o.jsx("span",{children:"10%"}),o.jsx("span",{children:"20%"})]}),o.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#a0a0a0"},children:"Adjust this slider to see how different return rates affect your path to financial independence."})]}),o.jsx(ie,{highcharts:le,options:Q}),o.jsxs("div",{style:{padding:"1rem",fontSize:"0.9rem",color:"#a0a0a0",lineHeight:"1.6"},children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Passive Income (Historical):"})," Actual monthly income from investments (incomes tagged with #interest)"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Passive Income (Projected):"})," Projected monthly income based on current assets, savings rate, and expected return"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Monthly Expenses:"})," 3-month rolling average to smooth out volatility"]}),s.crossoverPoint&&o.jsxs("p",{style:{marginTop:"0.5rem",fontWeight:"bold",color:"#4ade80"},children:["üéâ Projected Retirement Day: ",s.crossoverPoint]}),o.jsx("p",{style:{marginTop:"0.5rem",fontStyle:"italic"},children:'The point where Projected Passive Income crosses above Monthly Expenses is your "Retirement Day" - when your investments can fully cover your lifestyle.'})]})]})}export{ge as default};
