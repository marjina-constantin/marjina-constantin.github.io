import{u as S,j as o}from"./index-0Q4orPYt.js";import{r as P}from"./react-vendor-DObCo5uo.js";import{H as $,a as I}from"./charts-vendor-BgOMIWtF.js";import"./icons-vendor-CjON0rrL.js";function B(){var u,x;const{data:e}=S(),R=e.filtered_raw||e.raw,l=!!e.filtered_raw;P.useEffect(()=>{},[e.raw,e.filtered_raw]);const c=t=>t.toLocaleString("default",{month:"long",year:"numeric"}),g=new Date((u=e.raw[e.raw.length-1])==null?void 0:u.dt);let i=[],p=0,m=c(g),y=g;const F=R.slice().reverse();for(const t of F){const s=new Date(t.dt),n=c(s);if(n!=m){const h=((y.getTime()-g.getTime())/864e5+1)/30.42;i[m]=[m,parseFloat(parseFloat(String(p/h)).toFixed(2))]}t.type==="transaction"&&(p+=parseFloat(t.sum)),m=n,y=s}i=Object.values(i);let d=[];if(!l&&e.raw&&e.raw.length>0){const t=new Date((x=e.raw[e.raw.length-1])==null?void 0:x.dt);let s=0,n=0,a=c(t),h=t;const j=e.raw.slice().reverse();let v={};for(const r of j){const w=new Date(r.dt),D=c(w);if(D!=a){const b=((h.getTime()-t.getTime())/864e5+1)/30.42,M=b>0?n/b:0,E=s-n,T=M>0?E/M:0;v[a]=parseFloat(parseFloat(String(T)).toFixed(2))}r.type==="incomes"?s+=parseFloat(r.sum||"0"):r.type==="transaction"&&(n+=parseFloat(r.sum||"0")),a=D,h=w}d=i.map(([r])=>v[r]||0)}const f=[{name:"Monthly average expenses",data:i}];!l&&d.length>0&&f.push({name:"Months Remaining",data:d,yAxis:1,visible:!1});const A={chart:{type:"line",zoomType:"x"},boost:{useGPUTranslations:!0},title:{text:"Monthly Average Trends"},colors:["#E91E63","#4DD0E1"],yAxis:[{title:{text:"Monthly average"}},...l?[]:[{title:{text:"Months Remaining"},opposite:!0}]],xAxis:{type:"category",categories:i.map(([t])=>t),crosshair:!0},tooltip:{xDateFormat:"%B %Y",shared:!0,split:!0,formatter:function(){var n;let s=`<b>${typeof this.x=="string"?this.x:String(this.x)}</b><br/>`;return(n=this.points)==null||n.forEach(a=>{a.series.name==="Monthly average expenses"?s+=`<span style="color:${a.color}">●</span> ${a.series.name}: <b>${a.y}</b><br/>`:s+=`<span style="color:${a.color}">●</span> ${a.series.name}: <b>${a.y} months</b><br/>`}),s}},credits:{enabled:!1},series:f};return o.jsxs(o.Fragment,{children:[o.jsx($,{highcharts:I,options:A}),!l&&o.jsxs("div",{style:{padding:"1rem",fontSize:"0.9rem",color:"#a0a0a0",lineHeight:"1.6"},children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Months Remaining:"})," How many months you could survive on current savings if income stopped"]}),o.jsx("p",{style:{marginTop:"0.5rem",fontStyle:"italic"},children:"If your monthly average stays flat but your months remaining grow, you're gaining financial freedom."})]})]})}export{B as default};
